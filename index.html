<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PacknDash CRM - Movers and Packers CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background-color: #e2e8f0;
        }
        .progress {
            border-radius: 3px;
            height: 100%;
        }
        .step-active {
            background-color: #1d4ed8;
            color: white;
        }
        .step-completed {
            background-color: #16a34a;
            color: white;
        }
        .step-pending {
            background-color: #e2e8f0;
            color: #64748b;
        }
        .customer-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #1d4ed8;
            color: #1d4ed8;
            font-weight: 600;
        }
        .quote-card {
            transition: all 0.3s ease;
        }
        .quote-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .calendar-day {
            height: 100px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .calendar-day:hover {
            background-color: #f1f5f9;
        }
        .calendar-day.today {
            background-color: #dbeafe;
            border: 2px solid #3b82f6;
        }
        .calendar-day.has-move {
            background-color: #f0f9ff;
            position: relative;
        }
        .calendar-day.has-move::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background-color: #1d4ed8;
            border-radius: 50%;
        }
        .review-card {
            transition: all 0.2s;
        }
        .review-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .rating-stars {
            cursor: pointer;
        }
        .report-chart {
            min-height: 300px;
        }
        .settings-section {
            transition: all 0.2s;
        }
        .settings-section:hover {
            background-color: #f8fafc;
        }
        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            min-width: 18px;
            min-height: 18px;
            border-radius: 50%;
            background-color: #ef4444;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    <script>
        // Initialize data storage
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with sample data if empty
            if (!localStorage.getItem('packndash_customers')) {
                const initialCustomers = [
                    {
                        id: 1,
                        name: 'Karim El Alaili',
                        type: 'residential',
                        phone: '+971 50 123 4567',
                        email: 'karim@example.com',
                        address: 'Downtown Dubai, Burj Khalifa Area',
                        moveDate: '2023-11-15',
                        status: 'completed',
                        rating: 5,
                        review: 'Usman and his team handled our move last weekend and they were beyond fantastic! Arrived early, packed neatly and efficiently, and got us settled in our new home in no time. Highly recommended',
                        moveSize: '3-bedroom apartment',
                        services: ['Packing', 'Furniture Dismantling', 'Storage'],
                        stepStatus: {
                            plan: 'completed',
                            pack: 'completed',
                            load: 'completed',
                            deliver: 'completed'
                        }
                    },
                    {
                        id: 2,
                        name: 'Jiji Jayan',
                        type: 'residential',
                        phone: '+971 52 765 4321',
                        email: 'jiji@example.com',
                        address: 'Jumeirah Beach Residence',
                        moveDate: '2023-11-20',
                        status: 'scheduled',
                        rating: 5,
                        review: 'The team is fantastic. This is the second time we have used the team service. They are very professional, punctual, and knowledgeable. Great team. Highly recommended.',
                        moveSize: '2-bedroom apartment',
                        services: ['Packing', 'Vehicle Transport'],
                        stepStatus: {
                            plan: 'completed',
                            pack: 'in-progress',
                            load: 'pending',
                            deliver: 'pending'
                        }
                    },
                    {
                        id: 3,
                        name: 'Yasmin Hamadeh',
                        type: 'commercial',
                        phone: '+971 55 987 6543',
                        email: 'yasmin@business.ae',
                        address: 'Business Bay, Dubai',
                        moveDate: '2023-11-10',
                        status: 'in-progress',
                        rating: 5,
                        review: 'Very professional team, very fast and kind at a very affordable price. Definitely would advise dealing with them.',
                        moveSize: 'Office (500 sq ft)',
                        services: ['Commercial Moving', 'Document Storage'],
                        stepStatus: {
                            plan: 'completed',
                            pack: 'in-progress',
                            load: 'pending',
                            deliver: 'pending'
                        }
                    },
                    {
                        id: 4,
                        name: 'Baban',
                        type: 'residential',
                        phone: '+971 56 111 2222',
                        email: 'baban@example.com',
                        address: 'Dubai Marina',
                        moveDate: '2023-11-05',
                        status: 'completed',
                        rating: 5,
                        review: 'Amazing work by Raza, Imran, Arsalan. The moving-in process was really smooth and everything from dismantling to installation was handled with care and they were perfect at their job. Highly recommended.',
                        moveSize: '4-bedroom villa',
                        services: ['Full Service', 'Furniture Assembly', 'Storage'],
                        stepStatus: {
                            plan: 'completed',
                            pack: 'completed',
                            load: 'completed',
                            deliver: 'completed'
                        }
                    }
                ];
                localStorage.setItem('packndash_customers', JSON.stringify(initialCustomers));
            }
            
            // Initialize quotes
            if (!localStorage.getItem('packndash_quotes')) {
                const initialQuotes = [
                    {
                        id: 1,
                        customerId: 5,
                        customerName: 'Ahmed Khan',
                        date: '2023-11-18',
                        status: 'pending',
                        moveSize: '2-bedroom apartment',
                        services: ['Packing', 'Storage'],
                        estimatedCost: 1850,
                        validity: '2023-11-25'
                    },
                    {
                        id: 2,
                        customerId: 6,
                        customerName: 'Sarah Johnson',
                        date: '2023-11-17',
                        status: 'accepted',
                        moveSize: 'Office (300 sq ft)',
                        services: ['Commercial Moving', 'Document Storage'],
                        estimatedCost: 2400,
                        validity: '2023-11-24'
                    },
                    {
                        id: 3,
                        customerId: 7,
                        customerName: 'Mohammed Ali',
                        date: '2023-11-16',
                        status: 'rejected',
                        moveSize: '1-bedroom apartment',
                        services: ['Packing', 'Vehicle Transport'],
                        estimatedCost: 1200,
                        validity: '2023-11-23'
                    }
                ];
                localStorage.setItem('packndash_quotes', JSON.stringify(initialQuotes));
            }
            
            // Initialize reviews
            if (!localStorage.getItem('packndash_reviews')) {
                const initialReviews = [
                    {
                        id: 1,
                        customerId: 1,
                        customerName: 'Karim El Alaili',
                        rating: 5,
                        review: 'Usman and his team handled our move last weekend and they were beyond fantastic! Arrived early, packed neatly and efficiently, and got us settled in our new home in no time. Highly recommended',
                        date: '2023-11-15',
                        status: 'published'
                    },
                    {
                        id: 2,
                        customerId: 2,
                        customerName: 'Jiji Jayan',
                        rating: 5,
                        review: 'The team is fantastic. This is the second time we have used the team service. They are very professional, punctual, and knowledgeable. Great team. Highly recommended.',
                        date: '2023-11-20',
                        status: 'published'
                    },
                    {
                        id: 3,
                        customerId: 3,
                        customerName: 'Yasmin Hamadeh',
                        rating: 5,
                        review: 'Very professional team, very fast and kind at a very affordable price. Definitely would advise dealing with them.',
                        date: '2023-11-10',
                        status: 'published'
                    },
                    {
                        id: 4,
                        customerId: 4,
                        customerName: 'Baban',
                        rating: 5,
                        review: 'Amazing work by Raza, Imran, Arsalan. The moving-in process was really smooth and everything from dismantling to installation was handled with care and they were perfect at their job. Highly recommended.',
                        date: '2023-11-05',
                        status: 'published'
                    },
                    {
                        id: 5,
                        customerId: 8,
                        customerName: 'Fatima Ahmed',
                        rating: 4,
                        review: 'Good service overall. The team was professional and careful with our belongings. Only issue was they arrived 30 minutes late.',
                        date: '2023-11-12',
                        status: 'pending'
                    }
                ];
                localStorage.setItem('packndash_reviews', JSON.stringify(initialReviews));
            }
            
            // Initialize settings
            if (!localStorage.getItem('packndash_settings')) {
                const initialSettings = {
                    companyName: 'PacknDash',
                    companyAddress: 'Dubai, UAE',
                    companyPhone: '+971 4 222 2222',
                    companyEmail: 'info@packndash.ae',
                    notificationSettings: {
                        email: true,
                        sms: true,
                        push: true
                    },
                    businessHours: {
                        monday: '8:00 AM - 6:00 PM',
                        tuesday: '8:00 AM - 6:00 PM',
                        wednesday: '8:00 AM - 6:00 PM',
                        thursday: '8:00 AM - 6:00 PM',
                        friday: '9:00 AM - 2:00 PM',
                        saturday: 'Closed',
                        sunday: 'Closed'
                    },
                    services: [
                        { name: 'Residential Moving', price: 100, active: true },
                        { name: 'Commercial Storage', price: 150, active: true },
                        { name: 'Vehicle Storage', price: 80, active: true },
                        { name: 'Document Storage', price: 60, active: true },
                        { name: 'Packing Services', price: 50, active: true },
                        { name: 'Furniture Assembly', price: 75, active: true }
                    ]
                };
                localStorage.setItem('packndash_settings', JSON.stringify(initialSettings));
            }
            
            // Initialize with stats
            if (!localStorage.getItem('packndash_stats')) {
                const initialStats = {
                    happyCustomers: 1253,
                    successfulMoves: 2107,
                    activeMoves: 18,
                    revenue: 142500,
                    monthlyData: {
                        '2023-01': { moves: 150, revenue: 125000 },
                        '2023-02': { moves: 165, revenue: 137500 },
                        '2023-03': { moves: 170, revenue: 141500 },
                        '2023-04': { moves: 180, revenue: 150000 },
                        '2023-05': { moves: 190, revenue: 158000 },
                        '2023-06': { moves: 200, revenue: 166500 },
                        '2023-07': { moves: 195, revenue: 162500 },
                        '2023-08': { moves: 210, revenue: 175000 },
                        '2023-09': { moves: 220, revenue: 183000 },
                        '2023-10': { moves: 215, revenue: 179000 },
                        '2023-11': { moves: 180, revenue: 150000 }
                    }
                };
                localStorage.setItem('packndash_stats', JSON.stringify(initialStats));
            }
            
            // Load the CRM
            loadCRM();
        });
        
        // Main CRM loading function
        function loadCRM() {
            // Set up initial tab
            document.querySelector('[data-tab="dashboard"]').click();
            setupEventListeners();
        }
        
        // Set up all event listeners
        function setupEventListeners() {
            // Tab switching
            document.querySelectorAll('[data-tab]').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('[data-tab]').forEach(t => {
                        t.classList.remove('tab-active');
                    });
                    this.classList.add('tab-active');
                    
                    const tabId = this.getAttribute('data-tab');
                    if (tabId === 'dashboard') renderDashboard();
                    if (tabId === 'customers') renderCustomers();
                    if (tabId === 'moves') renderMoves();
                    if (tabId === 'quotes') renderQuotes();
                    if (tabId === 'schedule') renderSchedule();
                    if (tabId === 'reviews') renderReviews();
                    if (tabId === 'reports') renderReports();
                    if (tabId === 'settings') renderSettings();
                    
                    // Update header
                    updateHeader(tabId);
                });
            });
            
            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const activeTab = document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') || 'dashboard';
                    if (activeTab === 'dashboard') renderDashboard();
                    if (activeTab === 'customers') renderCustomers();
                    if (activeTab === 'moves') renderMoves();
                    if (activeTab === 'quotes') renderQuotes();
                    if (activeTab === 'reviews') renderReviews();
                });
            }
            
            // New move button
            const newMoveBtn = document.getElementById('newMoveBtn');
            if (newMoveBtn) {
                newMoveBtn.addEventListener('click', function() {
                    document.getElementById('newMoveModal').style.display = 'block';
                });
            }
            
            // New quote button
            const newQuoteBtn = document.getElementById('newQuoteBtn');
            if (newQuoteBtn) {
                newQuoteBtn.addEventListener('click', function() {
                    document.getElementById('newQuoteModal').style.display = 'block';
                });
            }
            
            // Close modals
            document.querySelectorAll('.close-modal, .modal-overlay').forEach(element => {
                element.addEventListener('click', function() {
                    const modal = this.closest('.modal') || this;
                    modal.style.display = 'none';
                });
            });
            
            // Create new move
            const moveForm = document.getElementById('moveForm');
            if (moveForm) {
                moveForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        id: Date.now(),
                        name: document.getElementById('name').value,
                        type: document.getElementById('type').value,
                        phone: document.getElementById('phone').value,
                        email: document.getElementById('email').value,
                        address: document.getElementById('address').value,
                        moveDate: document.getElementById('moveDate').value,
                        status: 'scheduled',
                        moveSize: document.getElementById('moveSize').value,
                        services: []
                    };
                    
                    // Get selected services
                    document.querySelectorAll('#moveForm input[name="services"]:checked').forEach(service => {
                        formData.services.push(service.value);
                    });
                    
                    // Add default step status
                    formData.stepStatus = {
                        plan: 'completed',
                        pack: 'pending',
                        load: 'pending',
                        deliver: 'pending'
                    };
                    
                    // Save to localStorage
                    let customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
                    customers.push(formData);
                    localStorage.setItem('packndash_customers', JSON.stringify(customers));
                    
                    // Update stats
                    let stats = JSON.parse(localStorage.getItem('packndash_stats'));
                    stats.activeMoves += 1;
                    localStorage.setItem('packndash_stats', JSON.stringify(stats));
                    
                    // Close modal and refresh
                    document.getElementById('newMoveModal').style.display = 'none';
                    moveForm.reset();
                    
                    // Show success message
                    alert('New move request created successfully!');
                    
                    // Refresh the moves view
                    if (document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') === 'moves') {
                        renderMoves();
                    }
                });
            }
            
            // Create new quote
            const quoteForm = document.getElementById('quoteForm');
            if (quoteForm) {
                quoteForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const formData = {
                        id: Date.now(),
                        customerId: document.getElementById('quoteCustomerId').value || Date.now(),
                        customerName: document.getElementById('quoteCustomerName').value,
                        date: new Date().toISOString().split('T')[0],
                        status: document.getElementById('quoteStatus').value,
                        moveSize: document.getElementById('quoteMoveSize').value,
                        services: [],
                        estimatedCost: parseFloat(document.getElementById('quoteCost').value),
                        validity: document.getElementById('quoteValidity').value
                    };
                    
                    // Get selected services
                    document.querySelectorAll('#quoteForm input[name="quoteServices"]:checked').forEach(service => {
                        formData.services.push(service.value);
                    });
                    
                    // Save to localStorage
                    let quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
                    quotes.push(formData);
                    localStorage.setItem('packndash_quotes', JSON.stringify(quotes));
                    
                    // Close modal and refresh
                    document.getElementById('newQuoteModal').style.display = 'none';
                    quoteForm.reset();
                    
                    // Show success message
                    alert('New quote created successfully!');
                    
                    // Refresh the quotes view
                    if (document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') === 'quotes') {
                        renderQuotes();
                    }
                });
            }
            
            // Mark step as completed
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.step-btn')) {
                    const customerId = e.target.getAttribute('data-customer-id');
                    const step = e.target.getAttribute('data-step');
                    
                    let customers = JSON.parse(localStorage.getItem('packndash_customers'));
                    const customerIndex = customers.findIndex(c => c.id == customerId);
                    
                    if (customerIndex !== -1) {
                        // Update step status
                        customers[customerIndex].stepStatus[step] = 'completed';
                        
                        // Move to next step if available
                        const steps = ['plan', 'pack', 'load', 'deliver'];
                        const currentStepIndex = steps.indexOf(step);
                        if (currentStepIndex < steps.length - 1) {
                            const nextStep = steps[currentStepIndex + 1];
                            customers[customerIndex].stepStatus[nextStep] = 'in-progress';
                        }
                        
                        // Update move status if all steps completed
                        const allStepsCompleted = Object.values(customers[customerIndex].stepStatus).every(s => s === 'completed');
                        if (allStepsCompleted) {
                            customers[customerIndex].status = 'completed';
                            
                            // Update stats
                            let stats = JSON.parse(localStorage.getItem('packndash_stats'));
                            stats.successfulMoves += 1;
                            stats.activeMoves -= 1;
                            localStorage.setItem('packndash_stats', JSON.stringify(stats));
                        }
                        
                        localStorage.setItem('packndash_customers', JSON.stringify(customers));
                        
                        // Refresh the view
                        const activeTab = document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab');
                        if (activeTab === 'dashboard') {
                            renderDashboard();
                        } else if (activeTab === 'moves') {
                            renderMoves();
                        } else if (activeTab === 'customers') {
                            renderCustomers();
                        }
                        
                        alert('Step marked as completed!');
                    }
                }
            });
            
            // View customer details
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.view-details, .view-details *')) {
                    const customerId = e.target.closest('.view-details').getAttribute('data-customer-id');
                    showCustomerDetails(customerId);
                }
            });
            
            // View quote details
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.view-quote')) {
                    const quoteId = e.target.getAttribute('data-quote-id');
                    showQuoteDetails(quoteId);
                }
            });
            
            // View review details
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.view-review')) {
                    const reviewId = e.target.getAttribute('data-review-id');
                    showReviewDetails(reviewId);
                }
            });
            
            // Update review status
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.update-review-status')) {
                    const reviewId = e.target.getAttribute('data-review-id');
                    const status = e.target.getAttribute('data-status');
                    updateReviewStatus(reviewId, status);
                }
            });
            
            // Update quote status
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.update-quote-status')) {
                    const quoteId = e.target.getAttribute('data-quote-id');
                    const status = e.target.getAttribute('data-status');
                    updateQuoteStatus(quoteId, status);
                }
            });
            
            // Calendar navigation
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.calendar-prev, .calendar-next')) {
                    const direction = e.target.classList.contains('calendar-prev') ? -1 : 1;
                    changeCalendarMonth(direction);
                }
            });
            
            // Settings save buttons
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('#saveCompanySettings, #saveNotificationSettings, #saveBusinessHours, #saveServices')) {
                    saveSettings(e.target.id);
                }
            });
            
            // Service toggle
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.service-toggle')) {
                    const serviceName = e.target.getAttribute('data-service');
                    toggleService(serviceName);
                }
            });
            
            // Rating interaction
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.rating-star')) {
                    const reviewId = e.target.getAttribute('data-review-id');
                    const rating = e.target.getAttribute('data-rating');
                    updateReviewRating(reviewId, rating);
                }
            });
            
            // Calendar day click
            document.addEventListener('click', function(e) {
                if (e.target && e.target.closest('.calendar-day')) {
                    const dayElement = e.target.closest('.calendar-day');
                    const date = dayElement.getAttribute('data-date');
                    showDayMoves(date);
                }
            });
        }
        
        // Update header based on active tab
        function updateHeader(tabId) {
            const headers = {
                dashboard: {
                    title: 'Dashboard',
                    subtitle: 'Overview of your moving business'
                },
                customers: {
                    title: 'Customer Management',
                    subtitle: 'Manage your customer database'
                },
                moves: {
                    title: 'Move Management',
                    subtitle: 'Track all active and scheduled moves'
                },
                quotes: {
                    title: 'Quote Generator',
                    subtitle: 'Create and manage move estimates'
                },
                schedule: {
                    title: 'Schedule',
                    subtitle: 'View and manage your move calendar'
                },
                reviews: {
                    title: 'Customer Reviews',
                    subtitle: 'Manage customer feedback and reviews'
                },
                reports: {
                    title: 'Reports & Analytics',
                    subtitle: 'Business performance analytics'
                },
                settings: {
                    title: 'Settings',
                    subtitle: 'Configure CRM settings'
                }
            };
            
            document.querySelector('h1.text-2xl').textContent = headers[tabId].title;
            document.querySelector('p.text-gray-500').textContent = headers[tabId].subtitle;
        }
        
        // Render Dashboard
        function renderDashboard() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            const stats = JSON.parse(localStorage.getItem('packndash_stats')) || {
                happyCustomers: 1253,
                successfulMoves: 2107,
                activeMoves: 18,
                revenue: 142500
            };
            
            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );
            
            // Active moves
            const activeMoves = filteredCustomers.filter(customer => 
                customer.status === 'in-progress' || customer.status === 'scheduled'
            ).slice(0, 3);
            
            // Recent reviews
            const reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const recentReviews = reviews.filter(review => 
                review.status === 'published'
            ).slice(0, 3);
            
            // Dashboard HTML
            const dashboardHTML = `
                <div class="p-6">
                    <!-- Stats Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="rounded-xl p-5 bg-blue-50">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-white shadow-sm">
                                    <i class="fas fa-users text-blue-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Happy Customers</p>
                                    <p class="text-2xl font-bold text-gray-800 mt-1">${stats.happyCustomers}+</p>
                                    <p class="text-xs text-green-600 mt-1">+12% from last month</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rounded-xl p-5 bg-green-50">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-white shadow-sm">
                                    <i class="fas fa-truck text-green-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Successful Moves</p>
                                    <p class="text-2xl font-bold text-gray-800 mt-1">${stats.successfulMoves}+</p>
                                    <p class="text-xs text-green-600 mt-1">+8% from last month</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rounded-xl p-5 bg-purple-50">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-white shadow-sm">
                                    <i class="fas fa-boxes text-purple-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Active Moves</p>
                                    <p class="text-2xl font-bold text-gray-800 mt-1">${stats.activeMoves}</p>
                                    <p class="text-xs text-green-600 mt-1">3 today</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="rounded-xl p-5 bg-amber-50">
                            <div class="flex items-center">
                                <div class="p-3 rounded-lg bg-white shadow-sm">
                                    <i class="fas fa-credit-card text-amber-600"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Revenue This Month</p>
                                    <p class="text-2xl font-bold text-gray-800 mt-1">AED ${formatNumber(stats.revenue)}</p>
                                    <p class="text-xs text-green-600 mt-1">+5% from last month</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Recent Moves -->
                        <div class="lg:col-span-2">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h2 class="text-lg font-semibold text-gray-800">Active Moves</h2>
                                    <a href="#" class="text-blue-600 text-sm hover:underline">View all</a>
                                </div>
                                
                                <div class="space-y-4">
                                    ${activeMoves.map(customer => `
                                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow customer-card">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <div class="flex items-center">
                                                    <h3 class="font-medium text-gray-800">${customer.name}</h3>
                                                    <span class="ml-2 px-2 py-1 rounded-full text-xs font-medium ${
                                                        customer.type === 'residential' 
                                                            ? 'bg-blue-100 text-blue-800' 
                                                            : 'bg-purple-100 text-purple-800'
                                                    }">
                                                        ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                                    </span>
                                                </div>
                                                <p class="text-gray-500 text-sm mt-1 flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                                                </p>
                                            </div>
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                                customer.status === 'completed' 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : customer.status === 'in-progress'
                                                        ? 'bg-amber-100 text-amber-800'
                                                        : 'bg-blue-100 text-blue-800'
                                            }">
                                                ${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}
                                            </span>
                                        </div>
                                        
                                        <div class="mt-3 flex items-center">
                                            <div class="flex-1">
                                                <div class="flex justify-between text-sm mb-1">
                                                    <span class="text-gray-500">Progress</span>
                                                    <span class="font-medium">${calculateProgress(customer.stepStatus)}%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: ${calculateProgress(customer.stepStatus)}%"></div>
                                                </div>
                                            </div>
                                            <div class="ml-4 text-sm text-gray-500">
                                                <span class="font-medium">Move Date:</span> ${formatDate(customer.moveDate)}
                                            </div>
                                        </div>
                                        
                                        <div class="mt-3 flex flex-wrap gap-2">
                                            ${customer.services.map(service => `
                                                <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                                    ${service}
                                                </span>
                                            `).join('')}
                                        </div>
                                        
                                        <div class="mt-4 flex space-x-2">
                                            <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-details" data-customer-id="${customer.id}">
                                                View Details
                                            </button>
                                            <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-customer-id="${customer.id}">
                                                Manage Move
                                            </button>
                                        </div>
                                    </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- 4-Step Workflow -->
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h2 class="text-lg font-semibold text-gray-800 mb-6">Move Workflow</h2>
                                
                                <div class="relative">
                                    <!-- Progress line -->
                                    <div class="absolute top-4 left-0 w-full h-1 bg-gray-200"></div>
                                    
                                    <div class="flex justify-between">
                                        <!-- Plan Step -->
                                        <div class="relative z-10 text-center">
                                            <div class="w-10 h-10 rounded-full ${
                                                activeMoves[0]?.stepStatus?.plan === 'completed' ? 'bg-green-500 text-white' : 
                                                activeMoves[0]?.stepStatus?.plan === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'
                                            } flex items-center justify-center mb-2">
                                                ${activeMoves[0]?.stepStatus?.plan === 'completed' ? '<i class="fas fa-check"></i>' : '1'}
                                            </div>
                                            <h3 class="font-medium">Plan</h3>
                                            <p class="text-xs text-gray-500 mt-1">Evaluation & Planning</p>
                                        </div>
                                        
                                        <!-- Pack Step -->
                                        <div class="relative z-10 text-center">
                                            <div class="w-10 h-10 rounded-full ${
                                                activeMoves[0]?.stepStatus?.pack === 'completed' ? 'bg-green-500 text-white' : 
                                                activeMoves[0]?.stepStatus?.pack === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'
                                            } flex items-center justify-center mb-2">
                                                ${activeMoves[0]?.stepStatus?.pack === 'completed' ? '<i class="fas fa-check"></i>' : '2'}
                                            </div>
                                            <h3 class="font-medium">Pack</h3>
                                            <p class="text-xs text-gray-500 mt-1">Packing & Protection</p>
                                        </div>
                                        
                                        <!-- Load Step -->
                                        <div class="relative z-10 text-center">
                                            <div class="w-10 h-10 rounded-full ${
                                                activeMoves[0]?.stepStatus?.load === 'completed' ? 'bg-green-500 text-white' : 
                                                activeMoves[0]?.stepStatus?.load === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'
                                            } flex items-center justify-center mb-2">
                                                ${activeMoves[0]?.stepStatus?.load === 'completed' ? '<i class="fas fa-check"></i>' : '3'}
                                            </div>
                                            <h3 class="font-medium">Load</h3>
                                            <p class="text-xs text-gray-500 mt-1">Loading & Transport</p>
                                        </div>
                                        
                                        <!-- Deliver Step -->
                                        <div class="relative z-10 text-center">
                                            <div class="w-10 h-10 rounded-full ${
                                                activeMoves[0]?.stepStatus?.deliver === 'completed' ? 'bg-green-500 text-white' : 
                                                activeMoves[0]?.stepStatus?.deliver === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'
                                            } flex items-center justify-center mb-2">
                                                ${activeMoves[0]?.stepStatus?.deliver === 'completed' ? '<i class="fas fa-check"></i>' : '4'}
                                            </div>
                                            <h3 class="font-medium">Deliver</h3>
                                            <p class="text-xs text-gray-500 mt-1">Delivery & Setup</p>
                                        </div>
                                    </div>
                                </div>
                                
                                ${activeMoves[0] ? `
                                <div class="mt-8">
                                    <h3 class="font-medium text-gray-800 mb-3">Current Move Details</h3>
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="font-medium text-gray-800">${activeMoves[0].name}</h4>
                                                <p class="text-gray-500 text-sm mt-1">${activeMoves[0].moveSize} Â· ${activeMoves[0].address}</p>
                                            </div>
                                            <span class="px-2 py-1 ${
                                                activeMoves[0].status === 'completed' ? 'bg-green-100 text-green-800' : 
                                                activeMoves[0].status === 'in-progress' ? 'bg-amber-100 text-amber-800' : 'bg-blue-100 text-blue-800'
                                            } text-xs rounded-full">
                                                ${activeMoves[0].status.charAt(0).toUpperCase() + activeMoves[0].status.slice(1)}
                                            </span>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5 class="text-sm font-medium text-gray-700 mb-2">Current Step: ${getCurrentStep(activeMoves[0].stepStatus)}</h5>
                                            <p class="text-sm text-gray-600">
                                                Our team is currently ${getCurrentStepDescription(activeMoves[0].stepStatus)}. 
                                                ${getStepCompletionText(activeMoves[0].stepStatus)}
                                            </p>
                                            
                                            <div class="mt-3 flex space-x-2">
                                                <button class="step-btn px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700" 
                                                        data-customer-id="${activeMoves[0].id}" 
                                                        data-step="${getCurrentStepKey(activeMoves[0].stepStatus)}">
                                                    Mark as Completed
                                                </button>
                                                <button class="px-3 py-1 border border-gray-300 text-gray-700 text-sm rounded hover:bg-gray-50">
                                                    Add Notes
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                ` : `
                                <div class="mt-8 text-center py-8">
                                    <i class="fas fa-truck text-4xl text-gray-300 mb-4"></i>
                                    <h3 class="text-lg font-medium text-gray-800">No active moves</h3>
                                    <p class="text-gray-500 mt-2">You don't have any active moves right now.</p>
                                    <button id="newMoveBtn" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        <i class="fas fa-plus mr-2"></i>New Move
                                    </button>
                                </div>
                                `}
                            </div>
                        </div>
                        
                        <!-- Right Sidebar -->
                        <div>
                            <!-- Customer Reviews -->
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h2 class="text-lg font-semibold text-gray-800">Recent Reviews</h2>
                                    <a href="#" class="text-blue-600 text-sm hover:underline">View all</a>
                                </div>
                                
                                <div class="space-y-4">
                                    ${recentReviews.map(review => `
                                    <div class="border border-gray-200 rounded-lg p-4 review-card">
                                        <div class="flex items-center mb-2">
                                            ${[...Array(5)].map((_, i) => `
                                                <i class="fas fa-star text-yellow-400 ${i < review.rating ? 'fill-current' : ''}"></i>
                                            `).join('')}
                                        </div>
                                        <p class="text-gray-600 text-sm line-clamp-3">${review.review}</p>
                                        <div class="mt-3 flex items-center">
                                            <div class="bg-gray-300 border-2 border-dashed rounded w-8 h-8"></div>
                                            <div class="ml-2">
                                                <p class="font-medium text-gray-800">${review.customerName}</p>
                                                <p class="text-xs text-gray-500">${formatDate(review.date)}</p>
                                            </div>
                                        </div>
                                    </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Quick Stats -->
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h2 class="text-lg font-semibold text-gray-800 mb-4">Business Statistics</h2>
                                
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">Conversion Rate</span>
                                            <span class="font-medium">68%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-purple-600" style="width: 68%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">Average Move Size</span>
                                            <span class="font-medium">2.7 bedrooms</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-blue-600" style="width: 75%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">Customer Satisfaction</span>
                                            <span class="font-medium">97%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-green-600" style="width: 97%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-6 pt-4 border-t border-gray-200">
                                    <h3 class="font-medium text-gray-800 mb-3">Top Services</h3>
                                    <div class="space-y-3">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Residential Moving</span>
                                            <span class="font-medium">42%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Packing Services</span>
                                            <span class="font-medium">28%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Storage Solutions</span>
                                            <span class="font-medium">18%</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Vehicle Transport</span>
                                            <span class="font-medium">12%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = dashboardHTML;
            setupEventListeners();
        }
        
        // Render Customers
        function renderCustomers() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );
            
            // Customers HTML
            const customersHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-800">Customer Database</h2>
                                <p class="text-gray-500 text-sm mt-1">Manage all your residential and commercial clients</p>
                            </div>
                            <div class="mt-4 md:mt-0 flex space-x-3">
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option>All Customers</option>
                                    <option>Residential</option>
                                    <option>Commercial</option>
                                    <option>Recent Moves</option>
                                </select>
                                <button id="newMoveBtn" class="flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>
                                    Add Customer
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Move</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    ${filteredCustomers.map(customer => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="bg-gray-300 border-2 border-dashed rounded w-10 h-10"></div>
                                                <div class="ml-4">
                                                    <div class="font-medium text-gray-800">${customer.name}</div>
                                                    <div class="text-gray-500 text-sm">${customer.moveSize}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                                customer.type === 'residential' 
                                                    ? 'bg-blue-100 text-blue-800' 
                                                    : 'bg-purple-100 text-purple-800'
                                            }">
                                                ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-gray-900">
                                                <div class="flex items-center mb-1">
                                                    <i class="fas fa-phone text-gray-400 mr-2"></i>
                                                    ${customer.phone}
                                                </div>
                                                <div class="flex items-center">
                                                    <i class="fas fa-envelope text-gray-400 mr-2"></i>
                                                    ${customer.email}
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatDate(customer.moveDate)}</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                                customer.status === 'completed' 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : customer.status === 'in-progress'
                                                        ? 'bg-amber-100 text-amber-800'
                                                        : 'bg-blue-100 text-blue-800'
                                            }">
                                                ${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button class="text-blue-600 hover:text-blue-900 mr-3 view-details" data-customer-id="${customer.id}">View</button>
                                            <button class="text-green-600 hover:text-green-900 mr-3">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Delete</button>
                                        </td>
                                    </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-6 flex flex-col sm:flex-row justify-between items-center">
                            <p class="text-sm text-gray-700">
                                Showing <span class="font-medium">1</span> to <span class="font-medium">${Math.min(10, filteredCustomers.length)}</span> of <span class="font-medium">${filteredCustomers.length}</span> results
                            </p>
                            <div class="mt-3 sm:mt-0">
                                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                    <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        Previous
                                    </a>
                                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">1</a>
                                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</a>
                                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</a>
                                    <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        Next
                                    </a>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = customersHTML;
            setupEventListeners();
        }
        
        // Render Moves
        function renderMoves() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );
            
            // Moves HTML
            const movesHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h2 class="text-lg font-semibold text-gray-800 mb-6">Move Management</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Move List -->
                            <div class="lg:col-span-2">
                                <div class="mb-6 flex justify-between items-center">
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-800">All Moves</h3>
                                        <p class="text-gray-500 text-sm mt-1">Track all scheduled and completed moves</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            <option>All Moves</option>
                                            <option>Scheduled</option>
                                            <option>In Progress</option>
                                            <option>Completed</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    ${filteredCustomers.map(customer => `
                                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow customer-card">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <div class="flex items-center">
                                                    <h3 class="font-medium text-gray-800">${customer.name}</h3>
                                                    <span class="ml-2 px-2 py-1 rounded-full text-xs font-medium ${
                                                        customer.type === 'residential' 
                                                            ? 'bg-blue-100 text-blue-800' 
                                                            : 'bg-purple-100 text-purple-800'
                                                    }">
                                                        ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                                    </span>
                                                </div>
                                                <p class="text-gray-500 text-sm mt-1 flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                                                </p>
                                            </div>
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                                customer.status === 'completed' 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : customer.status === 'in-progress'
                                                        ? 'bg-amber-100 text-amber-800'
                                                        : 'bg-blue-100 text-blue-800'
                                            }">
                                                ${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}
                                            </span>
                                        </div>
                                        
                                        <div class="mt-3 flex justify-between items-center">
                                            <div>
                                                <p class="text-sm text-gray-600">Move Date: <span class="font-medium text-gray-800">${formatDate(customer.moveDate)}</span></p>
                                                <p class="text-sm text-gray-600 mt-1">Property: <span class="font-medium text-gray-800">${customer.moveSize}</span></p>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-sm font-medium text-gray-800">AED ${calculateMoveValue(customer)}</p>
                                                <p class="text-xs text-gray-500 mt-1">Estimated Value</p>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="text-gray-500">Progress</span>
                                                <span class="font-medium">${calculateProgress(customer.stepStatus)}%</span>
                                            </div>
                                            <div class="w-full progress-bar">
                                                <div class="progress bg-blue-600" style="width: ${calculateProgress(customer.stepStatus)}%"></div>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4 flex flex-wrap gap-2">
                                            ${customer.services.map(service => `
                                                <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                                    ${service}
                                                </span>
                                            `).join('')}
                                        </div>
                                        
                                        <div class="mt-4 flex space-x-2">
                                            <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-details" data-customer-id="${customer.id}">
                                                View Details
                                            </button>
                                            <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" onclick="showCustomerDetails(${customer.id})">
                                                Manage Move
                                            </button>
                                        </div>
                                    </div>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Move Details Sidebar -->
                            <div>
                                <div class="bg-gray-50 rounded-xl p-5 mb-6">
                                    <h3 class="font-medium text-gray-800 mb-4">Quick Stats</h3>
                                    <div class="space-y-4">
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-500">Total Moves This Month</p>
                                            <p class="text-2xl font-bold text-gray-800 mt-1">${filteredCustomers.filter(c => 
                                                new Date(c.moveDate).getMonth() === new Date().getMonth() && 
                                                new Date(c.moveDate).getFullYear() === new Date().getFullYear()
                                            ).length}</p>
                                            <div class="flex items-center mt-2">
                                                <i class="fas fa-exclamation-triangle text-amber-500 mr-1"></i>
                                                <span class="text-xs text-amber-600">3 urgent moves</span>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-500">Revenue This Month</p>
                                            <p class="text-2xl font-bold text-gray-800 mt-1">AED ${formatNumber(calculateMonthlyRevenue())}</p>
                                            <div class="flex items-center mt-2">
                                                <span class="text-xs text-green-600">+5.2% from last month</span>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-white p-4 rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-500">Customer Satisfaction</p>
                                            <div class="flex items-center mt-1">
                                                <div class="flex">
                                                    ${[...Array(5)].map((_, i) => `
                                                        <i class="fas fa-star text-yellow-400 ${i < 4 ? 'fill-current' : ''}"></i>
                                                    `).join('')}
                                                </div>
                                                <span class="ml-2 text-2xl font-bold text-gray-800">4.8</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5">
                                    <h3 class="font-medium text-gray-800 mb-4">Upcoming Moves</h3>
                                    
                                    <div class="space-y-3">
                                        ${filteredCustomers
                                            .filter(c => c.status !== 'completed' && new Date(c.moveDate) > new Date())
                                            .sort((a, b) => new Date(a.moveDate) - new Date(b.moveDate))
                                            .slice(0, 3)
                                            .map(customer => `
                                            <div class="flex items-center">
                                                <div class="bg-${getDayColor(customer.moveDate)}-100 text-${getDayColor(customer.moveDate)}-800 w-8 h-8 rounded-lg flex items-center justify-center font-medium">
                                                    ${new Date(customer.moveDate).getDate()}
                                                </div>
                                                <div class="ml-3">
                                                    <p class="font-medium text-gray-800">${customer.name}</p>
                                                    <p class="text-xs text-gray-500">${customer.moveSize}</p>
                                                </div>
                                                <div class="ml-auto">
                                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                                        ${formatDate(customer.moveDate, 'short')}
                                                    </span>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                    
                                    <div class="mt-4 pt-4 border-t border-gray-200">
                                        <a href="#" class="text-blue-600 text-sm font-medium hover:underline flex items-center">
                                            View Full Calendar <i class="fas fa-chevron-down ml-1"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = movesHTML;
            setupEventListeners();
        }
        
        // Render Quotes
        function renderQuotes() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter quotes
            const filteredQuotes = quotes.filter(quote => 
                quote.customerName.toLowerCase().includes(searchQuery) ||
                quote.moveSize.toLowerCase().includes(searchQuery) ||
                quote.estimatedCost.toString().includes(searchQuery)
            );
            
            // Quotes HTML
            const quotesHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-800">Quotes Management</h2>
                                <p class="text-gray-500 text-sm mt-1">Create and manage move estimates for potential customers</p>
                            </div>
                            <div class="mt-4 md:mt-0">
                                <button id="newQuoteBtn" class="flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-file-invoice mr-2"></i>
                                    New Quote
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-6 flex space-x-4">
                            <button class="px-4 py-2 rounded-lg font-medium ${
                                !searchQuery ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }" onclick="filterQuotes('all')">All Quotes</button>
                            <button class="px-4 py-2 rounded-lg font-medium ${
                                document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') === 'quotes' && 
                                document.querySelector('#searchInput')?.value === 'pending' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }" onclick="filterQuotes('pending')">Pending</button>
                            <button class="px-4 py-2 rounded-lg font-medium ${
                                document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') === 'quotes' && 
                                document.querySelector('#searchInput')?.value === 'accepted' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }" onclick="filterQuotes('accepted')">Accepted</button>
                            <button class="px-4 py-2 rounded-lg font-medium ${
                                document.querySelector('[data-tab].tab-active')?.getAttribute('data-tab') === 'quotes' && 
                                document.querySelector('#searchInput')?.value === 'rejected' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }" onclick="filterQuotes('rejected')">Rejected</button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${filteredQuotes.map(quote => `
                            <div class="border border-gray-200 rounded-xl p-5 quote-card">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="font-medium text-gray-800">${quote.customerName}</h3>
                                        <p class="text-sm text-gray-500">${quote.moveSize}</p>
                                    </div>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                        quote.status === 'pending' ? 'bg-amber-100 text-amber-800' :
                                        quote.status === 'accepted' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                    }">
                                        ${quote.status.charAt(0).toUpperCase() + quote.status.slice(1)}
                                    </span>
                                </div>
                                
                                <div class="space-y-3 mb-4">
                                    <div class="flex justify-between">
                                        <span class="text-gray-500 text-sm">Date Created</span>
                                        <span class="font-medium text-gray-800 text-sm">${formatDate(quote.date)}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-500 text-sm">Valid Until</span>
                                        <span class="font-medium text-gray-800 text-sm">${formatDate(quote.validity)}</span>
                                    </div>
                                    <div class="border-t border-gray-200 pt-3">
                                        <div class="flex justify-between font-bold">
                                            <span>Estimated Cost</span>
                                            <span>AED ${formatNumber(quote.estimatedCost)}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h4 class="text-sm font-medium text-gray-700 mb-2">Services Included</h4>
                                    <div class="flex flex-wrap gap-2">
                                        ${quote.services.map(service => `
                                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                                ${service}
                                            </span>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-quote" data-quote-id="${quote.id}">
                                        View Details
                                    </button>
                                    ${quote.status === 'pending' ? `
                                    <button class="update-quote-status flex-1 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" 
                                            data-quote-id="${quote.id}" data-status="accepted">
                                        Accept
                                    </button>
                                    ` : ''}
                                </div>
                            </div>
                            `).join('')}
                            
                            ${filteredQuotes.length === 0 ? `
                            <div class="col-span-full text-center py-12 bg-gray-50 rounded-xl">
                                <i class="fas fa-file-invoice text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-800">No quotes found</h3>
                                <p class="text-gray-500 mt-2">You haven't created any quotes yet.</p>
                                <button id="newQuoteBtn" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>Create Your First Quote
                                </button>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = quotesHTML;
            setupEventListeners();
        }
        
        // Filter quotes by status
        function filterQuotes(status) {
            if (status === 'all') {
                document.getElementById('searchInput').value = '';
            } else {
                document.getElementById('searchInput').value = status;
            }
            
            const event = new Event('input', { bubbles: true });
            document.getElementById('searchInput').dispatchEvent(event);
        }
        
        // Render Schedule
        function renderSchedule() {
            const today = new Date();
            let currentMonth = today.getMonth();
            let currentYear = today.getFullYear();
            
            // Get current month's first day
            const firstDay = new Date(currentYear, currentMonth, 1);
            // Get number of days in month
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            // Get day of week for first day (0 = Sunday, 1 = Monday, etc.)
            const firstDayOfWeek = firstDay.getDay();
            
            // Get moves data
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            const movesByDate = {};
            
            customers.forEach(customer => {
                if (customer.moveDate) {
                    const dateKey = customer.moveDate.split('T')[0] || customer.moveDate;
                    if (!movesByDate[dateKey]) {
                        movesByDate[dateKey] = [];
                    }
                    movesByDate[dateKey].push(customer);
                }
            });
            
            // Generate calendar days
            let calendarHTML = '';
            
            // Add empty cells for days before the first of the month
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendarHTML += `<div class="calendar-day"></div>`;
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(currentYear, currentMonth, day);
                const dateStr = `${currentYear}-${(currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const isToday = date.toDateString() === today.toDateString();
                const hasMove = movesByDate[dateStr];
                
                calendarHTML += `
                <div class="calendar-day ${isToday ? 'today' : ''} ${hasMove ? 'has-move' : ''}" data-date="${dateStr}">
                    <div class="font-medium ${isToday ? 'text-blue-600' : ''}">${day}</div>
                    ${hasMove ? `<div class="text-xs mt-1 text-blue-600">${hasMove.length} move${hasMove.length > 1 ? 's' : ''}</div>` : ''}
                </div>
                `;
            }
            
            // Schedule HTML
            const scheduleHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-800">Move Schedule</h2>
                                <p class="text-gray-500 text-sm mt-1">View and manage your move calendar</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="calendar-prev px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="px-3 py-2 font-medium text-gray-800">
                                    ${today.toLocaleString('default', { month: 'long', year: 'numeric' })}
                                </button>
                                <button class="calendar-next px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-7 gap-1 mb-4">
                            <div class="text-center font-medium text-gray-600 py-2">Sun</div>
                            <div class="text-center font-medium text-gray-600 py-2">Mon</div>
                            <div class="text-center font-medium text-gray-600 py-2">Tue</div>
                            <div class="text-center font-medium text-gray-600 py-2">Wed</div>
                            <div class="text-center font-medium text-gray-600 py-2">Thu</div>
                            <div class="text-center font-medium text-gray-600 py-2">Fri</div>
                            <div class="text-center font-medium text-gray-600 py-2">Sat</div>
                        </div>
                        
                        <div class="grid grid-cols-7 gap-1 mb-6">
                            ${calendarHTML}
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Today's Moves (${formatDate(today.toISOString().split('T')[0])})</h3>
                            
                            <div class="space-y-4">
                                ${movesByDate[today.toISOString().split('T')[0]]?.length > 0 ? 
                                    movesByDate[today.toISOString().split('T')[0]].map(customer => `
                                    <div class="border border-gray-200 rounded-lg p-4">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h3 class="font-medium text-gray-800">${customer.name}</h3>
                                                <p class="text-gray-500 text-sm mt-1 flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                                                </p>
                                            </div>
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                                customer.status === 'completed' 
                                                    ? 'bg-green-100 text-green-800' 
                                                    : customer.status === 'in-progress'
                                                        ? 'bg-amber-100 text-amber-800'
                                                        : 'bg-blue-100 text-blue-800'
                                            }">
                                                ${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}
                                            </span>
                                        </div>
                                        
                                        <div class="mt-3">
                                            <p class="text-sm text-gray-600">Property: <span class="font-medium text-gray-800">${customer.moveSize}</span></p>
                                            <div class="mt-2 flex flex-wrap gap-2">
                                                ${customer.services.map(service => `
                                                    <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                                        ${service}
                                                    </span>
                                                `).join('')}
                                            </div>
                                        </div>
                                        
                                        <div class="mt-3 flex space-x-2">
                                            <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-details" data-customer-id="${customer.id}">
                                                View Details
                                            </button>
                                            <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" onclick="showCustomerDetails(${customer.id})">
                                                Manage Move
                                            </button>
                                        </div>
                                    </div>
                                    `).join('') : `
                                    <div class="text-center py-8 bg-gray-50 rounded-lg">
                                        <i class="fas fa-calendar-check text-3xl text-gray-300 mb-3"></i>
                                        <h3 class="text-lg font-medium text-gray-800">No moves scheduled for today</h3>
                                        <p class="text-gray-500 mt-2">Your calendar is clear for today.</p>
                                    </div>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = scheduleHTML;
            setupEventListeners();
        }
        
        // Change calendar month
        function changeCalendarMonth(direction) {
            const today = new Date();
            let currentMonth = today.getMonth();
            let currentYear = today.getFullYear();
            
            currentMonth += direction;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            
            // Update calendar display
            const calendarHeader = document.querySelector('.calendar-next').previousElementSibling;
            calendarHeader.textContent = `${new Date(currentYear, currentMonth, 1).toLocaleString('default', { month: 'long', year: 'numeric' })}`;
            
            // For this demo, we're not actually changing the calendar
            // In a real implementation, you would re-render the calendar with the new month
            alert(`Calendar would show ${new Date(currentYear, currentMonth, 1).toLocaleString('default', { month: 'long', year: 'numeric' })}`);
        }
        
        // Show moves for a specific day
        function showDayMoves(date) {
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            const movesForDay = customers.filter(customer => 
                customer.moveDate && customer.moveDate.startsWith(date)
            );
            
            let movesHTML = '';
            
            if (movesForDay.length > 0) {
                movesHTML = movesForDay.map(customer => `
                <div class="border border-gray-200 rounded-lg p-4 mb-4">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-medium text-gray-800">${customer.name}</h3>
                            <p class="text-gray-500 text-sm mt-1 flex items-center">
                                <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                            </p>
                        </div>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${
                            customer.status === 'completed' 
                                ? 'bg-green-100 text-green-800' 
                                : customer.status === 'in-progress'
                                    ? 'bg-amber-100 text-amber-800'
                                    : 'bg-blue-100 text-blue-800'
                        }">
                            ${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}
                        </span>
                    </div>
                    
                    <div class="mt-3">
                        <p class="text-sm text-gray-600">Property: <span class="font-medium text-gray-800">${customer.moveSize}</span></p>
                        <div class="mt-2 flex flex-wrap gap-2">
                            ${customer.services.map(service => `
                                <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">
                                    ${service}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="mt-3 flex space-x-2">
                        <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-details" data-customer-id="${customer.id}">
                            View Details
                        </button>
                        <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" onclick="showCustomerDetails(${customer.id})">
                            Manage Move
                        </button>
                    </div>
                </div>
                `).join('');
            } else {
                movesHTML = `
                <div class="text-center py-8 bg-gray-50 rounded-lg">
                    <i class="fas fa-calendar-check text-3xl text-gray-300 mb-3"></i>
                    <h3 class="text-lg font-medium text-gray-800">No moves scheduled for this day</h3>
                    <p class="text-gray-500 mt-2">This day is clear in your calendar.</p>
                </div>
                `;
            }
            
            // Create modal
            const modalHTML = `
                <div class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" style="display: block;">
                    <div class="bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800">Moves for ${formatDate(date)}</h2>
                                <button class="close-modal text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times text-2xl"></i>
                                </button>
                            </div>
                            
                            <div>
                                ${movesHTML}
                            </div>
                            
                            <div class="mt-6 flex justify-end">
                                <button class="close-modal px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            setupEventListeners();
        }
        
        // Render Reviews
        function renderReviews() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter reviews
            const filteredReviews = reviews.filter(review => 
                review.customerName.toLowerCase().includes(searchQuery) ||
                review.review.toLowerCase().includes(searchQuery)
            );
            
            // Reviews HTML
            const reviewsHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-800">Customer Reviews</h2>
                                <p class="text-gray-500 text-sm mt-1">Manage customer feedback and reviews</p>
                            </div>
                            <div class="mt-4 md:mt-0 flex space-x-3">
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option>All Reviews</option>
                                    <option>Published</option>
                                    <option>Pending</option>
                                    <option>Archived</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${filteredReviews.map(review => `
                            <div class="border border-gray-200 rounded-lg p-5 review-card">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h3 class="font-medium text-gray-800">${review.customerName}</h3>
                                        <p class="text-sm text-gray-500">${formatDate(review.date)}</p>
                                    </div>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                        review.status === 'published' ? 'bg-green-100 text-green-800' :
                                        review.status === 'pending' ? 'bg-amber-100 text-amber-800' : 'bg-gray-100 text-gray-800'
                                    }">
                                        ${review.status.charAt(0).toUpperCase() + review.status.slice(1)}
                                    </span>
                                </div>
                                
                                <div class="rating-stars mb-3">
                                    ${[...Array(5)].map((_, i) => `
                                        <i class="fas fa-star text-yellow-400 ${i < review.rating ? 'fill-current' : ''} rating-star" data-review-id="${review.id}" data-rating="${i + 1}"></i>
                                    `).join('')}
                                </div>
                                
                                <p class="text-gray-600 text-sm mb-4 line-clamp-4">${review.review}</p>
                                
                                <div class="pt-4 border-t border-gray-200">
                                    <div class="flex space-x-2">
                                        ${review.status === 'pending' ? `
                                        <button class="update-review-status flex-1 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" 
                                                data-review-id="${review.id}" data-status="published">
                                            Publish
                                        </button>
                                        <button class="update-review-status flex-1 px-3 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700" 
                                                data-review-id="${review.id}" data-status="archived">
                                            Archive
                                        </button>
                                        ` : review.status === 'published' ? `
                                        <button class="update-review-status flex-1 px-3 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700" 
                                                data-review-id="${review.id}" data-status="archived">
                                            Archive
                                        </button>
                                        ` : `
                                        <button class="update-review-status flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" 
                                                data-review-id="${review.id}" data-status="published">
                                            Publish
                                        </button>
                                        `}
                                    </div>
                                </div>
                            </div>
                            `).join('')}
                            
                            ${filteredReviews.length === 0 ? `
                            <div class="col-span-full text-center py-12 bg-gray-50 rounded-xl">
                                <i class="fas fa-comments text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-800">No reviews found</h3>
                                <p class="text-gray-500 mt-2">You don't have any customer reviews to manage.</p>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = reviewsHTML;
            setupEventListeners();
        }
        
        // Update review status
        function updateReviewStatus(reviewId, status) {
            let reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const reviewIndex = reviews.findIndex(r => r.id == reviewId);
            
            if (reviewIndex !== -1) {
                reviews[reviewIndex].status = status;
                localStorage.setItem('packndash_reviews', JSON.stringify(reviews));
                
                // Refresh the reviews view
                renderReviews();
                
                // Show success message
                alert(`Review status updated to ${status}!`);
            }
        }
        
        // Update review rating
        function updateReviewRating(reviewId, rating) {
            let reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const reviewIndex = reviews.findIndex(r => r.id == reviewId);
            
            if (reviewIndex !== -1) {
                reviews[reviewIndex].rating = parseInt(rating);
                localStorage.setItem('packndash_reviews', JSON.stringify(reviews));
                
                // Refresh the reviews view
                renderReviews();
                
                // Show success message
                alert(`Review rating updated to ${rating} stars!`);
            }
        }
        
        // Show review details
        function showReviewDetails(reviewId) {
            const reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            const review = reviews.find(r => r.id == reviewId);
            
            if (!review) return;
            
            const customer = customers.find(c => c.id == review.customerId) || {
                name: review.customerName,
                moveSize: 'Not specified',
                address: 'Not specified',
                moveDate: 'Not specified'
            };
            
            const detailsHTML = `
                <div id="reviewDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div class="bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-800">Review Details</h2>
                                <button class="close-modal text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times text-2xl"></i>
                                </button>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="md:col-span-2">
                                    <div class="bg-white rounded-lg shadow p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Review Content</h3>
                                        
                                        <div class="space-y-4">
                                            <div class="flex items-center mb-4">
                                                <div class="text-2xl font-bold text-yellow-400 mr-2">${review.rating}</div>
                                                <div class="flex">
                                                    ${[...Array(5)].map((_, i) => `
                                                        <i class="fas fa-star text-yellow-400 ${i < review.rating ? 'fill-current' : ''}"></i>
                                                    `).join('')}
                                                </div>
                                            </div>
                                            
                                            <p class="text-gray-800 leading-relaxed">${review.review}</p>
                                            
                                            <div class="mt-6 pt-4 border-t border-gray-200">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Status:</span>
                                                    <span class="font-medium ${
                                                        review.status === 'published' ? 'text-green-600' :
                                                        review.status === 'pending' ? 'text-amber-600' : 'text-gray-600'
                                                    }">
                                                        ${review.status.charAt(0).toUpperCase() + review.status.slice(1)}
                                                    </span>
                                                </div>
                                                <div class="flex justify-between mt-2">
                                                    <span class="text-gray-600">Date:</span>
                                                    <span class="font-medium">${formatDate(review.date)}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white rounded-lg shadow p-5">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Customer Information</h3>
                                        
                                        <div class="space-y-4">
                                            <div class="flex">
                                                <span class="w-32 font-medium text-gray-600">Name:</span>
                                                <span class="text-gray-800">${customer.name}</span>
                                            </div>
                                            
                                            <div class="flex">
                                                <span class="w-32 font-medium text-gray-600">Move Date:</span>
                                                <span class="text-gray-800">${formatDate(customer.moveDate)}</span>
                                            </div>
                                            
                                            <div class="flex">
                                                <span class="w-32 font-medium text-gray-600">Property Size:</span>
                                                <span class="text-gray-800">${customer.moveSize}</span>
                                            </div>
                                            
                                            <div class="flex">
                                                <span class="w-32 font-medium text-gray-600">Address:</span>
                                                <span class="text-gray-800">${customer.address}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Review Actions</h3>
                                        
                                        <div class="space-y-3">
                                            ${review.status === 'pending' ? `
                                            <button class="update-review-status w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700" 
                                                    data-review-id="${review.id}" data-status="published">
                                                <i class="fas fa-check mr-2"></i>Publish Review
                                            </button>
                                            <button class="update-review-status w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700" 
                                                    data-review-id="${review.id}" data-status="archived">
                                                <i class="fas fa-archive mr-2"></i>Archive Review
                                            </button>
                                            ` : review.status === 'published' ? `
                                            <button class="update-review-status w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700" 
                                                    data-review-id="${review.id}" data-status="archived">
                                                <i class="fas fa-archive mr-2"></i>Archive Review
                                            </button>
                                            <button class="w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                                <i class="fas fa-share mr-2"></i>Share on Social Media
                                            </button>
                                            ` : `
                                            <button class="update-review-status w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" 
                                                    data-review-id="${review.id}" data-status="published">
                                                <i class="fas fa-check mr-2"></i>Publish Review
                                            </button>
                                            <button class="w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                                <i class="fas fa-edit mr-2"></i>Edit Review
                                            </button>
                                            `}
                                            
                                            <button class="w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                                <i class="fas fa-print mr-2"></i>Print Review
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gray-50 rounded-lg p-5">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Review Statistics</h3>
                                        
                                        <div class="space-y-4">
                                            <div>
                                                <div class="flex justify-between text-sm mb-1">
                                                    <span class="text-gray-600">Average Rating</span>
                                                    <span class="font-medium">4.8</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-yellow-500" style="width: 96%"></div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <div class="flex justify-between text-sm mb-1">
                                                    <span class="text-gray-600">Total Reviews</span>
                                                    <span class="font-medium">1,253</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: 100%"></div>
                                                </div>
                                            </div>
                                            
                                            <div class="mt-4">
                                                <h4 class="font-medium text-gray-700 mb-2">Rating Distribution</h4>
                                                ${[5, 4, 3, 2, 1].map(rating => `
                                                <div class="flex items-center mb-2">
                                                    <div class="w-10 text-sm text-gray-600">${rating} Star</div>
                                                    <div class="flex-1 mx-2 bg-gray-200 rounded-full h-2">
                                                        <div class="bg-yellow-400 h-2 rounded-full" style="width: ${rating === 5 ? '68%' : rating === 4 ? '22%' : rating === 3 ? '6%' : rating === 2 ? '2%' : '2%'}"></div>
                                                    </div>
                                                    <div class="w-8 text-sm text-right">${rating === 5 ? '68%' : rating === 4 ? '22%' : rating === 3 ? '6%' : rating === 2 ? '2%' : '2%'}</div>
                                                </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', detailsHTML);
            setupEventListeners();
        }
        
        // Render Reports
        function renderReports() {
            const stats = JSON.parse(localStorage.getItem('packndash_stats')) || {
                happyCustomers: 1253,
                successfulMoves: 2107,
                activeMoves: 18,
                revenue: 142500,
                monthlyData: {
                    '2023-01': { moves: 150, revenue: 125000 },
                    '2023-02': { moves: 165, revenue: 137500 },
                    '2023-03': { moves: 170, revenue: 141500 },
                    '2023-04': { moves: 180, revenue: 150000 },
                    '2023-05': { moves: 190, revenue: 158000 },
                    '2023-06': { moves: 200, revenue: 166500 },
                    '2023-07': { moves: 195, revenue: 162500 },
                    '2023-08': { moves: 210, revenue: 175000 },
                    '2023-09': { moves: 220, revenue: 183000 },
                    '2023-10': { moves: 215, revenue: 179000 },
                    '2023-11': { moves: 180, revenue: 150000 }
                }
            };
            
            // Get current month data
            const today = new Date();
            const currentMonth = `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}`;
            const currentData = stats.monthlyData[currentMonth] || { moves: 0, revenue: 0 };
            
            // Get previous month data
            const prevMonthDate = new Date(today);
            prevMonthDate.setMonth(today.getMonth() - 1);
            const prevMonth = `${prevMonthDate.getFullYear()}-${(prevMonthDate.getMonth() + 1).toString().padStart(2, '0')}`;
            const prevData = stats.monthlyData[prevMonth] || { moves: 0, revenue: 0 };
            
            // Calculate growth
            const moveGrowth = prevData.moves > 0 ? ((currentData.moves - prevData.moves) / prevData.moves) * 100 : 100;
            const revenueGrowth = prevData.revenue > 0 ? ((currentData.revenue - prevData.revenue) / prevData.revenue) * 100 : 100;
            
            // Generate chart data
            const months = Object.keys(stats.monthlyData).sort();
            const moveData = months.map(month => stats.monthlyData[month].moves);
            const revenueData = months.map(month => stats.monthlyData[month].revenue);
            
            // Reports HTML
            const reportsHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-800">Business Performance</h2>
                                <p class="text-gray-500 text-sm mt-1">Track your business metrics and growth</p>
                            </div>
                            <div class="flex space-x-3">
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option>This Month</option>
                                    <option>This Quarter</option>
                                    <option>This Year</option>
                                    <option>Custom Range</option>
                                </select>
                                <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">
                                    <i class="fas fa-download mr-2"></i>Export Report
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-blue-50 rounded-xl p-5">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-lg bg-white shadow-sm">
                                        <i class="fas fa-truck text-blue-600"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">Moves This Month</p>
                                        <p class="text-2xl font-bold text-gray-800 mt-1">${currentData.moves}</p>
                                        <p class="text-xs ${
                                            moveGrowth >= 0 ? 'text-green-600' : 'text-red-600'
                                        } mt-1">
                                            ${moveGrowth >= 0 ? '+' : ''}${moveGrowth.toFixed(1)}% from last month
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-green-50 rounded-xl p-5">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-lg bg-white shadow-sm">
                                        <i class="fas fa-credit-card text-green-600"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600">Revenue This Month</p>
                                        <p class="text-2xl font-bold text-gray-800 mt-1">AED ${formatNumber(currentData.revenue)}</p>
                                        <p class="text-xs ${
                                            revenueGrowth >= 0 ? 'text-green-600' : 'text-red-600'
                                        } mt-1">
                                            ${revenueGrowth >= 0 ? '+' : ''}${revenueGrowth.toFixed(1)}% from last month
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-chart bg-white p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Monthly Performance</h3>
                            
                            <div class="h-64 flex items-end justify-between px-4" style="margin-bottom: 2rem;">
                                ${moveData.map((moves, index) => {
                                    const height = Math.min(100, (moves / Math.max(...moveData)) * 100);
                                    return `
                                    <div class="flex flex-col items-center" style="width: ${100 / moveData.length}%;">
                                        <div class="w-4 bg-blue-500 mb-1" style="height: ${height}%;"></div>
                                        <span class="text-xs text-gray-500">${months[index].split('-')[1]}</span>
                                    </div>
                                    `;
                                }).join('')}
                            </div>
                            
                            <div class="flex justify-center space-x-4 mt-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded mr-1"></div>
                                    <span class="text-xs text-gray-600">Moves</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded mr-1"></div>
                                    <span class="text-xs text-gray-600">Revenue</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h2 class="text-lg font-semibold text-gray-800 mb-6">Detailed Analytics</h2>
                                
                                <div class="mb-6">
                                    <h3 class="text-md font-medium text-gray-800 mb-3">Customer Acquisition</h3>
                                    <div class="h-48 bg-gray-50 rounded-lg p-4">
                                        <div class="h-full flex items-end justify-between px-2">
                                            ${[25, 40, 30, 45, 50, 60, 70].map(value => `
                                            <div class="flex flex-col items-center w-8">
                                                <div class="w-4 bg-purple-500 mb-1" style="height: ${value}%"></div>
                                                <span class="text-xs text-gray-500">${value}</span>
                                            </div>
                                            `).join('')}
                                        </div>
                                        <div class="flex justify-center space-x-2 mt-2">
                                            <span class="text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded">Website</span>
                                            <span class="text-xs px-2 py-1 bg-blue-100 text-blue-600 rounded">Referral</span>
                                            <span class="text-xs px-2 py-1 bg-green-100 text-green-600 rounded">Social Media</span>
                                            <span class="text-xs px-2 py-1 bg-amber-100 text-amber-600 rounded">Direct</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <h3 class="text-md font-medium text-gray-800 mb-3">Service Breakdown</h3>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h4 class="font-medium text-gray-800 mb-2">By Service Type</h4>
                                            <div class="space-y-3">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Residential Moving</span>
                                                    <span class="font-medium">42%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: 42%"></div>
                                                </div>
                                                
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Packing Services</span>
                                                    <span class="font-medium">28%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: 28%"></div>
                                                </div>
                                                
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Storage Solutions</span>
                                                    <span class="font-medium">18%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: 18%"></div>
                                                </div>
                                                
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">Vehicle Transport</span>
                                                    <span class="font-medium">12%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-blue-600" style="width: 12%"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-gray-50 rounded-lg p-4">
                                            <h4 class="font-medium text-gray-800 mb-2">Customer Satisfaction</h4>
                                            <div class="flex items-center mb-4">
                                                <div class="text-3xl font-bold text-yellow-400 mr-2">4.8</div>
                                                <div class="flex">
                                                    ${[...Array(5)].map((_, i) => `
                                                        <i class="fas fa-star text-yellow-400 ${i < 4 ? 'fill-current' : ''}"></i>
                                                    `).join('')}
                                                </div>
                                            </div>
                                            
                                            <div class="space-y-3">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">5 Stars</span>
                                                    <span class="font-medium">68%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-yellow-400" style="width: 68%"></div>
                                                </div>
                                                
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">4 Stars</span>
                                                    <span class="font-medium">22%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-yellow-400" style="width: 22%"></div>
                                                </div>
                                                
                                                <div class="flex justify-between">
                                                    <span class="text-gray-600">3 Stars and below</span>
                                                    <span class="font-medium">10%</span>
                                                </div>
                                                <div class="w-full progress-bar">
                                                    <div class="progress bg-yellow-400" style="width: 10%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 class="text-md font-medium text-gray-800 mb-3">Top Performing Areas</h3>
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Area</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Moves</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Revenue</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Growth</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <tr>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <div class="flex items-center">
                                                            <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                                                            <span class="font-medium">Downtown Dubai</span>
                                                        </div>
                                                    </td>
                                                    <td class="px-4 py-2 whitespace-nowrap">320</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">AED 265,000</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <span class="text-green-600">+12.5%</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <div class="flex items-center">
                                                            <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                                                            <span class="font-medium">Jumeirah Beach Residence</span>
                                                        </div>
                                                    </td>
                                                    <td class="px-4 py-2 whitespace-nowrap">285</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">AED 236,000</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <span class="text-green-600">+8.3%</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <div class="flex items-center">
                                                            <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                                                            <span class="font-medium">Business Bay</span>
                                                        </div>
                                                    </td>
                                                    <td class="px-4 py-2 whitespace-nowrap">240</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">AED 198,000</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <span class="text-green-600">+6.7%</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <div class="flex items-center">
                                                            <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
                                                            <span class="font-medium">Dubai Marina</span>
                                                        </div>
                                                    </td>
                                                    <td class="px-4 py-2 whitespace-nowrap">215</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">AED 178,000</td>
                                                    <td class="px-4 py-2 whitespace-nowrap">
                                                        <span class="text-red-600">-2.1%</span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
                                <h2 class="text-lg font-semibold text-gray-800 mb-4">Quick Metrics</h2>
                                
                                <div class="space-y-4">
                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Conversion Rate</span>
                                            <span class="font-bold">68%</span>
                                        </div>
                                        <div class="w-full progress-bar mt-2">
                                            <div class="progress bg-blue-600" style="width: 68%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 rounded-lg p-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Customer Retention</span>
                                            <span class="font-bold">42%</span>
                                        </div>
                                        <div class="w-full progress-bar mt-2">
                                            <div class="progress bg-green-600" style="width: 42%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-purple-50 rounded-lg p-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Average Move Size</span>
                                            <span class="font-bold">2.7 bedrooms</span>
                                        </div>
                                        <div class="w-full progress-bar mt-2">
                                            <div class="progress bg-purple-600" style="width: 75%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-amber-50 rounded-lg p-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Average Revenue per Move</span>
                                            <span class="font-bold">AED 685</span>
                                        </div>
                                        <div class="w-full progress-bar mt-2">
                                            <div class="progress bg-amber-600" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-pink-50 rounded-lg p-4">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Customer Satisfaction</span>
                                            <span class="font-bold">97%</span>
                                        </div>
                                        <div class="w-full progress-bar mt-2">
                                            <div class="progress bg-pink-600" style="width: 97%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h2 class="text-lg font-semibold text-gray-800 mb-4">Top Services</h2>
                                
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-gray-600">Residential Moving</span>
                                            <span class="font-medium">42%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-blue-600" style="width: 42%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-gray-600">Packing Services</span>
                                            <span class="font-medium">28%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-blue-600" style="width: 28%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-gray-600">Storage Solutions</span>
                                            <span class="font-medium">18%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-blue-600" style="width: 18%"></div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-gray-600">Vehicle Transport</span>
                                            <span class="font-medium">12%</span>
                                        </div>
                                        <div class="w-full progress-bar">
                                            <div class="progress bg-blue-600" style="width: 12%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-6 pt-4 border-t border-gray-200">
                                    <h3 class="font-medium text-gray-800 mb-3">Service Profitability</h3>
                                    <div class="space-y-3">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Packing Services</span>
                                            <span class="font-medium text-green-600">+32% margin</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Storage Solutions</span>
                                            <span class="font-medium text-green-600">+28% margin</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Residential Moving</span>
                                            <span class="font-medium text-amber-600">+18% margin</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Vehicle Transport</span>
                                            <span class="font-medium text-red-600">+8% margin</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = reportsHTML;
            setupEventListeners();
        }
        
        // Render Settings
        function renderSettings() {
            const settings = JSON.parse(localStorage.getItem('packndash_settings')) || {
                companyName: 'PacknDash',
                companyAddress: 'Dubai, UAE',
                companyPhone: '+971 4 222 2222',
                companyEmail: 'info@packndash.ae',
                notificationSettings: {
                    email: true,
                    sms: true,
                    push: true
                },
                businessHours: {
                    monday: '8:00 AM - 6:00 PM',
                    tuesday: '8:00 AM - 6:00 PM',
                    wednesday: '8:00 AM - 6:00 PM',
                    thursday: '8:00 AM - 6:00 PM',
                    friday: '9:00 AM - 2:00 PM',
                    saturday: 'Closed',
                    sunday: 'Closed'
                },
                services: [
                    { name: 'Residential Moving', price: 100, active: true },
                    { name: 'Commercial Storage', price: 150, active: true },
                    { name: 'Vehicle Storage', price: 80, active: true },
                    { name: 'Document Storage', price: 60, active: true },
                    { name: 'Packing Services', price: 50, active: true },
                    { name: 'Furniture Assembly', price: 75, active: true }
                ]
            };
            
            // Settings HTML
            const settingsHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h2 class="text-lg font-semibold text-gray-800 mb-6">CRM Settings</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1">
                                <div class="space-y-2">
                                    <a href="#" class="block p-3 rounded-lg bg-gray-50 font-medium text-gray-800 settings-section active" data-section="company">
                                        Company Information
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="notifications">
                                        Notification Settings
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="business-hours">
                                        Business Hours
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="services">
                                        Services & Pricing
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="team">
                                        Team Management
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="integrations">
                                        Integrations
                                    </a>
                                </div>
                            </div>
                            
                            <div class="lg:col-span-2">
                                <!-- Company Information -->
                                <div id="company-settings" class="settings-content">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Company Information</h3>
                                        
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Company Name</label>
                                                <input type="text" id="companyName" value="${settings.companyName}"
                                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Company Address</label>
                                                <input type="text" id="companyAddress" value="${settings.companyAddress}"
                                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                                <input type="tel" id="companyPhone" value="${settings.companyPhone}"
                                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                                <input type="email" id="companyEmail" value="${settings.companyEmail}"
                                                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button id="saveCompanySettings" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Notification Settings -->
                                <div id="notification-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Notification Preferences</h3>
                                        <p class="text-gray-600 mb-6">Choose how you want to be notified about important events and updates.</p>
                                        
                                        <div class="space-y-4">
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="emailNotifications" name="emailNotifications" type="checkbox" ${settings.notificationSettings.email ? 'checked' : ''}
                                                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="emailNotifications" class="font-medium text-gray-700">Email Notifications</label>
                                                    <p class="text-gray-500 text-sm">Receive notifications via email for new moves, quotes, and customer inquiries.</p>
                                                </div>
                                            </div>
                                            
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="smsNotifications" name="smsNotifications" type="checkbox" ${settings.notificationSettings.sms ? 'checked' : ''}
                                                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="smsNotifications" class="font-medium text-gray-700">SMS Notifications</label>
                                                    <p class="text-gray-500 text-sm">Receive text message notifications for urgent move requests and schedule changes.</p>
                                                </div>
                                            </div>
                                            
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="pushNotifications" name="pushNotifications" type="checkbox" ${settings.notificationSettings.push ? 'checked' : ''}
                                                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="pushNotifications" class="font-medium text-gray-700">Push Notifications</label>
                                                    <p class="text-gray-500 text-sm">Receive browser notifications when you're logged into the CRM.</p>
                                                </div>
                                            </div>
                                            
                                            <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                                <h4 class="font-medium text-blue-800 mb-2">Notification Timing</h4>
                                                <p class="text-blue-700 text-sm">All notifications will be sent during business hours (8 AM - 6 PM GST).</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button id="saveNotificationSettings" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Business Hours -->
                                <div id="business-hours-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Business Hours</h3>
                                        <p class="text-gray-600 mb-6">Set your company's operating hours for customer inquiries and move scheduling.</p>
                                        
                                        <div class="space-y-4">
                                            ${Object.keys(settings.businessHours).map(day => `
                                            <div class="flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg">
                                                <span class="font-medium text-gray-700">${day.charAt(0).toUpperCase() + day.slice(1)}</span>
                                                <input type="text" value="${settings.businessHours[day]}"
                                                    class="border border-gray-300 rounded px-3 py-1 w-40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                                    placeholder="8:00 AM - 6:00 PM">
                                            </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button id="saveBusinessHours" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Services & Pricing -->
                                <div id="services-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Services & Pricing</h3>
                                        <p class="text-gray-600 mb-6">Manage your service offerings and pricing structure.</p>
                                        
                                        <div class="space-y-4">
                                            ${settings.services.map(service => `
                                            <div class="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                                                <div>
                                                    <h4 class="font-medium text-gray-800">${service.name}</h4>
                                                    <p class="text-gray-500 text-sm">AED ${service.price} per hour/base rate</p>
                                                </div>
                                                <div class="flex items-center">
                                                    <span class="mr-4 text-sm text-gray-500">Active</span>
                                                    <label class="relative inline-flex items-center cursor-pointer">
                                                        <input type="checkbox" value="" class="sr-only peer service-toggle" data-service="${service.name}" ${service.active ? 'checked' : ''}>
                                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                                    </label>
                                                </div>
                                            </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button id="saveServices" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Team Management (placeholder) -->
                                <div id="team-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Team Management</h3>
                                        <p class="text-gray-600 mb-6">Manage your team members and their access levels.</p>
                                        
                                        <div class="space-y-4">
                                            <div class="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <div class="bg-gray-300 border-2 border-dashed rounded w-10 h-10"></div>
                                                    <div class="ml-3">
                                                        <h4 class="font-medium text-gray-800">Admin User</h4>
                                                        <p class="text-gray-500 text-sm">admin@packndash.ae</p>
                                                    </div>
                                                </div>
                                                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                                    Administrator
                                                </span>
                                            </div>
                                            
                                            <div class="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <div class="bg-gray-300 border-2 border-dashed rounded w-10 h-10"></div>
                                                    <div class="ml-3">
                                                        <h4 class="font-medium text-gray-800">John Smith</h4>
                                                        <p class="text-gray-500 text-sm">john@packndash.ae</p>
                                                    </div>
                                                </div>
                                                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">
                                                    Manager
                                                </span>
                                            </div>
                                            
                                            <div class="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <div class="bg-gray-300 border-2 border-dashed rounded w-10 h-10"></div>
                                                    <div class="ml-3">
                                                        <h4 class="font-medium text-gray-800">Sarah Johnson</h4>
                                                        <p class="text-gray-500 text-sm">sarah@packndash.ae</p>
                                                    </div>
                                                </div>
                                                <span class="px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full">
                                                    Staff
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-6">
                                            <button class="w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-500 hover:text-blue-600">
                                                <i class="fas fa-plus mr-2"></i>Add New Team Member
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Integrations (placeholder) -->
                                <div id="integrations-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Integrations</h3>
                                        <p class="text-gray-600 mb-6">Connect with other tools and services to enhance your CRM.</p>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-blue-100 text-blue-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fab fa-google text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800 mb-1">Google Calendar</h4>
                                                <p class="text-gray-500 text-sm mb-3">Sync your move schedule with Google Calendar.</p>
                                                <button class="px-3 py-1 bg-blue-600 text-white rounded text-sm">Connect</button>
                                            </div>
                                            
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-green-100 text-green-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fab fa-whatsapp text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800 mb-1">WhatsApp</h4>
                                                <p class="text-gray-500 text-sm mb-3">Send automated notifications via WhatsApp.</p>
                                                <button class="px-3 py-1 bg-green-600 text-white rounded text-sm">Connect</button>
                                            </div>
                                            
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-blue-100 text-blue-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fas fa-envelope text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800 mb-1">Email Marketing</h4>
                                                <p class="text-gray-500 text-sm mb-3">Connect with your email marketing platform.</p>
                                                <button class="px-3 py-1 bg-blue-600 text-white rounded text-sm">Connect</button>
                                            </div>
                                            
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-purple-100 text-purple-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fas fa-chart-line text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800 mb-1">Analytics</h4>
                                                <p class="text-gray-500 text-sm mb-3">Connect with Google Analytics for insights.</p>
                                                <button class="px-3 py-1 bg-purple-600 text-white rounded text-sm">Connect</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex justify-end">
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = settingsHTML;
            
            // Set up section navigation
            document.querySelectorAll('.settings-section').forEach(section => {
                section.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active section in sidebar
                    document.querySelectorAll('.settings-section').forEach(s => {
                        s.classList.remove('active', 'bg-gray-50', 'text-gray-800');
                        s.classList.add('hover:bg-gray-50', 'text-gray-600');
                    });
                    this.classList.add('active', 'bg-gray-50', 'text-gray-800');
                    this.classList.remove('hover:bg-gray-50', 'text-gray-600');
                    
                    // Show the corresponding content
                    const sectionId = this.getAttribute('data-section');
                    document.querySelectorAll('.settings-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`${sectionId}-settings`).classList.remove('hidden');
                });
            });
            
            setupEventListeners();
        }
        
        // Save settings
        function saveSettings(settingType) {
            const settings = JSON.parse(localStorage.getItem('packndash_settings')) || {
                companyName: 'PacknDash',
                companyAddress: 'Dubai, UAE',
                companyPhone: '+971 4 222 2222',
                companyEmail: 'info@packndash.ae',
                notificationSettings: {
                    email: true,
                    sms: true,
                    push: true
                },
                businessHours: {
                    monday: '8:00 AM - 6:00 PM',
                    tuesday: '8:00 AM - 6:00 PM',
                    wednesday: '8:00 AM - 6:00 PM',
                    thursday: '8:00 AM - 6:00 PM',
                    friday: '9:00 AM - 2:00 PM',
                    saturday: 'Closed',
                    sunday: 'Closed'
                },
                services: [
                    { name: 'Residential Moving', price: 100, active: true },
                    { name: 'Commercial Storage', price: 150, active: true },
                    { name: 'Vehicle Storage', price: 80, active: true },
                    { name: 'Document Storage', price: 60, active: true },
                    { name: 'Packing Services', price: 50, active: true },
                    { name: 'Furniture Assembly', price: 75, active: true }
                ]
            };
            
            if (settingType === 'saveCompanySettings') {
                settings.companyName = document.getElementById('companyName').value;
                settings.companyAddress = document.getElementById('companyAddress').value;
                settings.companyPhone = document.getElementById('companyPhone').value;
                settings.companyEmail = document.getElementById('companyEmail').value;
                
                alert('Company information updated successfully!');
            } 
            else if (settingType === 'saveNotificationSettings') {
                settings.notificationSettings.email = document.getElementById('emailNotifications').checked;
                settings.notificationSettings.sms = document.getElementById('smsNotifications').checked;
                settings.notificationSettings.push = document.getElementById('pushNotifications').checked;
                
                alert('Notification settings updated successfully!');
            }
            else if (settingType === 'saveBusinessHours') {
                const hoursInputs = document.querySelectorAll('#business-hours-settings input');
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                
                days.forEach((day, index) => {
                    settings.businessHours[day] = hoursInputs[index].value;
                });
                
                alert('Business hours updated successfully!');
            }
            else if (settingType === 'saveServices') {
                // In a real implementation, we would update the services array
                alert('Services settings updated successfully!');
            }
            
            localStorage.setItem('packndash_settings', JSON.stringify(settings));
        }
        
        // Toggle service active status
        function toggleService(serviceName) {
            const settings = JSON.parse(localStorage.getItem('packndash_settings')) || {
                services: [
                    { name: 'Residential Moving', price: 100, active: true },
                    { name: 'Commercial Storage', price: 150, active: true },
                    { name: 'Vehicle Storage', price: 80, active: true },
                    { name: 'Document Storage', price: 60, active: true },
                    { name: 'Packing Services', price: 50, active: true },
                    { name: 'Furniture Assembly', price: 75, active: true }
                ]
            };
            
            const serviceIndex = settings.services.findIndex(s => s.name === serviceName);
            if (serviceIndex !== -1) {
                settings.services[serviceIndex].active = !settings.services[serviceIndex].active;
                localStorage.setItem('packndash_settings', JSON.stringify(settings));
                
                alert(`Service "${serviceName}" has been ${settings.services[serviceIndex].active ? 'activated' : 'deactivated'}!`);
            }
        }
        
        // Show customer details
        function
