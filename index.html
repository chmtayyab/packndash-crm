<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PacknDash CRM - Movers and Packers CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background-color: #e2e8f0;
        }
        .progress {
            border-radius: 3px;
            height: 100%;
        }
        .step-active {
            background-color: #1d4ed8;
            color: white;
        }
        .step-completed {
            background-color: #16a34a;
            color: white;
        }
        .step-pending {
            background-color: #e2e8f0;
            color: #64748b;
        }
        .customer-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #1d4ed8;
            color: #1d4ed8;
            font-weight: 600;
        }
        .quote-card {
            transition: all 0.3s ease;
        }
        .quote-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .calendar-day {
            height: 100px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .calendar-day:hover {
            background-color: #f1f5f9;
        }
        .calendar-day.today {
            background-color: #dbeafe;
            border: 2px solid #3b82f6;
        }
        .calendar-day.has-move {
            background-color: #f0f9ff;
            position: relative;
        }
        .calendar-day.has-move::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background-color: #1d4ed8;
            border-radius: 50%;
        }
        .review-card {
            transition: all 0.2s;
        }
        .review-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .rating-stars {
            cursor: pointer;
        }
        .report-chart {
            min-height: 300px;
        }
        .settings-section {
            transition: all 0.2s;
        }
        .settings-section:hover {
            background-color: #f8fafc;
        }
        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            min-width: 18px;
            min-height: 18px;
            border-radius: 50%;
            background-color: #ef4444;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <div class="p-6 border-b border-gray-200">
                <h1 class="text-xl font-bold text-gray-800">PacknDash</h1>
                <p class="text-sm text-gray-500">CRM System</p>
            </div>
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="dashboard">
                            <i class="fas fa-home mr-3"></i>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="customers">
                            <i class="fas fa-users mr-3"></i>
                            Customers
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="moves">
                            <i class="fas fa-truck mr-3"></i>
                            Moves
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="quotes">
                            <i class="fas fa-file-invoice mr-3"></i>
                            Quotes
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="schedule">
                            <i class="fas fa-calendar mr-3"></i>
                            Schedule
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="reviews">
                            <i class="fas fa-comments mr-3"></i>
                            Reviews
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="reports">
                            <i class="fas fa-chart-bar mr-3"></i>
                            Reports
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center px-4 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 tab-link" data-tab="settings">
                            <i class="fas fa-cog mr-3"></i>
                            Settings
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Dashboard</h1>
                        <p class="text-gray-500">Overview of your moving business</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <input type="text" id="searchInput" placeholder="Search..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <main id="mainContent" class="flex-1 overflow-y-auto p-6">
                <!-- Content will be loaded here by JavaScript -->
            </main>
        </div>
    </div>

    <!-- Modals -->
    <!-- New Move Modal -->
    <div id="newMoveModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">New Move Request</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="moveForm">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Customer Name</label>
                        <input type="text" id="name" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Customer Type</label>
                        <select id="type" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="residential">Residential</option>
                            <option value="commercial">Commercial</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                        <input type="tel" id="phone" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="address" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Move Date</label>
                        <input type="date" id="moveDate" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Move Size</label>
                        <select id="moveSize" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="studio">Studio</option>
                            <option value="1-bedroom">1-Bedroom</option>
                            <option value="2-bedroom">2-Bedroom</option>
                            <option value="3-bedroom">3-Bedroom</option>
                            <option value="office-200">Office (200 sq ft)</option>
                            <option value="office-500">Office (500 sq ft)</option>
                        </select>
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button type="button" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 close-modal">
                        Cancel
                    </button>
                    <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        Create Move
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Quote Modal -->
    <div id="newQuoteModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-2xl mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Create New Quote</h3>
                <button class="close-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="quoteForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Customer Name</label>
                        <input type="text" id="quoteCustomerName" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Move Size</label>
                        <select id="quoteMoveSize" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="studio">Studio</option>
                            <option value="1-bedroom">1-Bedroom</option>
                            <option value="2-bedroom">2-Bedroom</option>
                            <option value="3-bedroom">3-Bedroom</option>
                            <option value="office-200">Office (200 sq ft)</option>
                            <option value="office-500">Office (500 sq ft)</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Estimated Cost</label>
                        <input type="number" id="quoteEstimatedCost" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valid Until</label>
                        <input type="date" id="quoteValidity" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select id="quoteStatus" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="pending">Pending</option>
                            <option value="accepted">Accepted</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Services Included</label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Packing" class="mr-2">
                            Packing
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Storage" class="mr-2">
                            Storage
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Commercial Moving" class="mr-2">
                            Commercial Moving
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Vehicle Transport" class="mr-2">
                            Vehicle Transport
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Furniture Assembly" class="mr-2">
                            Furniture Assembly
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" name="services" value="Cleaning" class="mr-2">
                            Cleaning
                        </label>
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button type="button" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 close-modal">
                        Cancel
                    </button>
                    <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        Create Quote
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Initialize data storage
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with sample data if empty
            if (!localStorage.getItem('packndash_customers')) {
                const initialCustomers = [
                    {
                        id: 1,
                        name: 'Karim El Alaili',
                        type: 'residential',
                        phone: '+971 50 123 4567',
                        address: 'Downtown Dubai, Dubai, UAE',
                        moveDate: '2023-12-15',
                        moveSize: '2-bedroom apartment',
                        stepStatus: {
                            plan: 'completed',
                            pack: 'in-progress',
                            load: 'pending',
                            deliver: 'pending'
                        }
                    },
                    {
                        id: 2,
                        name: 'Sarah Johnson',
                        type: 'commercial',
                        phone: '+971 52 987 6543',
                        address: 'Business Bay, Dubai, UAE',
                        moveDate: '2023-12-20',
                        moveSize: 'Office (500 sq ft)',
                        stepStatus: {
                            plan: 'completed',
                            pack: 'completed',
                            load: 'completed',
                            deliver: 'in-progress'
                        }
                    },
                    {
                        id: 3,
                        name: 'Mohammed Ali',
                        type: 'residential',
                        phone: '+971 54 555 1234',
                        address: 'Jumeirah, Dubai, UAE',
                        moveDate: '2023-12-10',
                        moveSize: '3-bedroom villa',
                        stepStatus: {
                            plan: 'completed',
                            pack: 'completed',
                            load: 'completed',
                            deliver: 'completed'
                        }
                    }
                ];
                localStorage.setItem('packndash_customers', JSON.stringify(initialCustomers));
            }

            if (!localStorage.getItem('packndash_stats')) {
                const initialStats = {
                    totalCustomers: 3,
                    activeMoves: 2,
                    completedMoves: 1,
                    pendingQuotes: 2,
                    acceptedQuotes: 3,
                    rejectedQuotes: 1
                };
                localStorage.setItem('packndash_stats', JSON.stringify(initialStats));
            }

            if (!localStorage.getItem('packndash_quotes')) {
                const initialQuotes = [
                    {
                        id: 1,
                        customerId: 1,
                        customerName: 'Karim El Alaili',
                        date: '2023-11-18',
                        status: 'pending',
                        moveSize: '2-bedroom apartment',
                        services: ['Packing', 'Storage'],
                        estimatedCost: 1850,
                        validity: '2023-11-25'
                    },
                    {
                        id: 2,
                        customerId: 2,
                        customerName: 'Sarah Johnson',
                        date: '2023-11-17',
                        status: 'accepted',
                        moveSize: 'Office (300 sq ft)',
                        services: ['Commercial Moving', 'Document Storage'],
                        estimatedCost: 2400,
                        validity: '2023-11-24'
                    },
                    {
                        id: 3,
                        customerId: 3,
                        customerName: 'Mohammed Ali',
                        date: '2023-11-16',
                        status: 'rejected',
                        moveSize: '1-bedroom apartment',
                        services: ['Packing Services'],
                        estimatedCost: 1200,
                        validity: '2023-11-23'
                    }
                ];
                localStorage.setItem('packndash_quotes', JSON.stringify(initialQuotes));
            }

            if (!localStorage.getItem('packndash_reviews')) {
                const initialReviews = [
                    {
                        id: 1,
                        customerId: 1,
                        customerName: 'Karim El Alaili',
                        rating: 5,
                        comment: 'Excellent service! The team was professional and careful with our belongings.',
                        date: '2023-11-10',
                        status: 'published'
                    },
                    {
                        id: 2,
                        customerId: 2,
                        customerName: 'Sarah Johnson',
                        rating: 4,
                        comment: 'Good moving experience. Only issue was slight delay in delivery.',
                        date: '2023-11-12',
                        status: 'published'
                    },
                    {
                        id: 3,
                        customerId: 3,
                        customerName: 'Mohammed Ali',
                        rating: 5,
                        comment: 'Outstanding service from start to finish. Highly recommended!',
                        date: '2023-11-08',
                        status: 'published'
                    }
                ];
                localStorage.setItem('packndash_reviews', JSON.stringify(initialReviews));
            }

            if (!localStorage.getItem('packndash_settings')) {
                const initialSettings = {
                    companyName: 'PacknDash',
                    companyAddress: 'Dubai, UAE',
                    companyPhone: '+971 4 222 2222',
                    companyEmail: 'info@packndash.ae',
                    notificationSettings: {
                        email: true,
                        sms: true,
                        push: true
                    },
                    businessHours: {
                        monday: '8:00 AM - 6:00 PM',
                        tuesday: '8:00 AM - 6:00 PM',
                        wednesday: '8:00 AM - 6:00 PM',
                        thursday: '8:00 AM - 6:00 PM',
                        friday: '9:00 AM - 2:00 PM',
                        saturday: 'Closed',
                        sunday: 'Closed'
                    },
                    services: [
                        { name: 'Residential Moving', price: 100, active: true },
                        { name: 'Commercial Storage', price: 150, active: true },
                        { name: 'Vehicle Storage', price: 80, active: true },
                        { name: 'Document Storage', price: 60, active: true },
                        { name: 'Packing Services', price: 50, active: true },
                        { name: 'Furniture Assembly', price: 75, active: true }
                    ]
                };
                localStorage.setItem('packndash_settings', JSON.stringify(initialSettings));
            }

            // Set default active tab
            renderDashboard();
            document.querySelector('[data-tab="dashboard"]').classList.add('tab-active');
            
            // Set up event listeners
            setupEventListeners();
        });

        // Set up event listeners
        function setupEventListeners() {
            // Tab navigation
            document.querySelectorAll('.tab-link').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all tabs
                    document.querySelectorAll('.tab-link').forEach(t => {
                        t.classList.remove('tab-active');
                    });
                    
                    // Add active class to clicked tab
                    this.classList.add('tab-active');
                    
                    // Get tab ID and render content
                    const tabId = this.getAttribute('data-tab');
                    if (tabId === 'dashboard') renderDashboard();
                    if (tabId === 'customers') renderCustomers();
                    if (tabId === 'moves') renderMoves();
                    if (tabId === 'quotes') renderQuotes();
                    if (tabId === 'schedule') renderSchedule();
                    if (tabId === 'reviews') renderReviews();
                    if (tabId === 'reports') renderReports();
                    if (tabId === 'settings') renderSettings();
                    
                    // Update header
                    updateHeader(tabId);
                });
            });

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const activeTab = document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') || 'dashboard';
                    if (activeTab === 'dashboard') renderDashboard();
                    if (activeTab === 'customers') renderCustomers();
                    if (activeTab === 'moves') renderMoves();
                    if (activeTab === 'quotes') renderQuotes();
                    if (activeTab === 'reviews') renderReviews();
                });
            }

            // Close modals
            document.querySelectorAll('.close-modal, .modal-overlay').forEach(element => {
                element.addEventListener('click', function() {
                    const modal = this.closest('.modal') || this;
                    modal.classList.add('hidden');
                });
            });

            // New Move button
            const newMoveBtn = document.getElementById('newMoveBtn');
            if (newMoveBtn) {
                newMoveBtn.addEventListener('click', function() {
                    document.getElementById('newMoveModal').classList.remove('hidden');
                });
            }

            // New Quote button
            const newQuoteBtn = document.getElementById('newQuoteBtn');
            if (newQuoteBtn) {
                newQuoteBtn.addEventListener('click', function() {
                    document.getElementById('newQuoteModal').classList.remove('hidden');
                });
            }

            // Create new move
            const moveForm = document.getElementById('moveForm');
            if (moveForm) {
                moveForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = {
                        id: Date.now(),
                        name: document.getElementById('name').value,
                        type: document.getElementById('type').value,
                        phone: document.getElementById('phone').value,
                        address: document.getElementById('address').value,
                        moveDate: document.getElementById('moveDate').value,
                        moveSize: document.getElementById('moveSize').value,
                        stepStatus: {
                            plan: 'in-progress',
                            pack: 'pending',
                            load: 'pending',
                            deliver: 'pending'
                        }
                    };

                    // Save to localStorage
                    let customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
                    customers.push(formData);
                    localStorage.setItem('packndash_customers', JSON.stringify(customers));

                    // Update stats
                    let stats = JSON.parse(localStorage.getItem('packndash_stats'));
                    stats.totalCustomers += 1;
                    stats.activeMoves += 1;
                    localStorage.setItem('packndash_stats', JSON.stringify(stats));

                    // Close modal and reset form
                    document.getElementById('newMoveModal').classList.add('hidden');
                    moveForm.reset();

                    // Show success message
                    alert('New move request created successfully!');

                    // Refresh the view
                    if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'moves') {
                        renderMoves();
                    }
                    if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'dashboard') {
                        renderDashboard();
                    }
                });
            }

            // Create new quote
            const quoteForm = document.getElementById('quoteForm');
            if (quoteForm) {
                quoteForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const services = [];
                    document.querySelectorAll('input[name="services"]:checked').forEach(cb => {
                        services.push(cb.value);
                    });

                    const formData = {
                        id: Date.now(),
                        customerId: document.getElementById('quoteCustomerId').value || Date.now(),
                        customerName: document.getElementById('quoteCustomerName').value,
                        date: new Date().toISOString().split('T')[0],
                        status: document.getElementById('quoteStatus').value,
                        moveSize: document.getElementById('quoteMoveSize').value,
                        services: services,
                        estimatedCost: parseFloat(document.getElementById('quoteEstimatedCost').value),
                        validity: document.getElementById('quoteValidity').value
                    };

                    // Save to localStorage
                    let quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
                    quotes.push(formData);
                    localStorage.setItem('packndash_quotes', JSON.stringify(quotes));

                    // Update stats
                    let stats = JSON.parse(localStorage.getItem('packndash_stats'));
                    if (formData.status === 'pending') stats.pendingQuotes += 1;
                    if (formData.status === 'accepted') stats.acceptedQuotes += 1;
                    if (formData.status === 'rejected') stats.rejectedQuotes += 1;
                    localStorage.setItem('packndash_stats', JSON.stringify(stats));

                    // Close modal and reset form
                    document.getElementById('newQuoteModal').classList.add('hidden');
                    quoteForm.reset();

                    // Show success message
                    alert('New quote created successfully!');

                    // Refresh the view
                    if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'quotes') {
                        renderQuotes();
                    }
                    if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'dashboard') {
                        renderDashboard();
                    }
                });
            }

            // View details buttons
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.view-details')) {
                    const customerId = e.target.getAttribute('data-customer-id');
                    viewCustomerDetails(customerId);
                }
            });

            // Update quote status
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.update-quote-status')) {
                    const quoteId = e.target.getAttribute('data-quote-id');
                    const status = e.target.getAttribute('data-status');
                    updateQuoteStatus(quoteId, status);
                }
            });

            // Update review status
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('.update-review-status')) {
                    const reviewId = e.target.getAttribute('data-review-id');
                    const status = e.target.getAttribute('data-status');
                    updateReviewStatus(reviewId, status);
                }
            });

            // Settings save buttons
            document.addEventListener('click', function(e) {
                if (e.target && e.target.matches('#saveCompanySettings, #saveNotificationSettings, #saveBusinessHours, #saveServices')) {
                    const settingType = e.target.id;
                    saveSettings(settingType);
                }
            });

            // Settings section navigation
            document.querySelectorAll('.settings-section').forEach(section => {
                section.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active section in sidebar
                    document.querySelectorAll('.settings-section').forEach(s => {
                        s.classList.remove('active', 'bg-gray-50', 'text-gray-800');
                        s.classList.add('hover:bg-gray-50', 'text-gray-600');
                    });
                    
                    this.classList.add('active', 'bg-gray-50', 'text-gray-800');
                    this.classList.remove('hover:bg-gray-50', 'text-gray-600');
                    
                    // Show the corresponding content
                    const sectionId = this.getAttribute('data-section');
                    document.querySelectorAll('.settings-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`${sectionId}-settings`).classList.remove('hidden');
                });
            });
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString();
        }

        // Update header based on active tab
        function updateHeader(tabId) {
            const headers = {
                dashboard: {title: 'Dashboard', subtitle: 'Overview of your moving business'},
                customers: {title: 'Customer Management', subtitle: 'Manage your customer database'},
                moves: {title: 'Move Management', subtitle: 'Track all active and scheduled moves'},
                quotes: {title: 'Quote Generator', subtitle: 'Create and manage move estimates'},
                schedule: {title: 'Schedule', subtitle: 'View and manage your move calendar'},
                reviews: {title: 'Customer Reviews', subtitle: 'Manage customer feedback and reviews'},
                reports: {title: 'Reports & Analytics', subtitle: 'Business performance analytics'},
                settings: {title: 'Settings', subtitle: 'Configure CRM settings'}
            };
            document.querySelector('h1.text-2xl').textContent = headers[tabId].title;
            document.querySelector('p.text-gray-500').textContent = headers[tabId].subtitle;
        }

        // Render Dashboard
        function renderDashboard() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            const quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
            const stats = JSON.parse(localStorage.getItem('packndash_stats')) || {
                totalCustomers: 0,
                activeMoves: 0,
                completedMoves: 0,
                pendingQuotes: 0,
                acceptedQuotes: 0,
                rejectedQuotes: 0
            };

            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );

            // Get recent moves
            const recentMoves = [...filteredCustomers]
                .sort((a, b) => new Date(b.moveDate) - new Date(a.moveDate))
                .slice(0, 5);

            // Get pending quotes
            const pendingQuotes = quotes.filter(q => q.status === 'pending')
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);

            const dashboardHTML = `
                <div class="space-y-6">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6">
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Customers</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.totalCustomers}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <i class="fas fa-truck"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Active Moves</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.activeMoves}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Completed Moves</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.completedMoves}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                                    <i class="fas fa-file-invoice"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Pending Quotes</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.pendingQuotes}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <i class="fas fa-thumbs-up"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Accepted Quotes</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.acceptedQuotes}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-red-100 text-red-600">
                                    <i class="fas fa-thumbs-down"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Rejected Quotes</p>
                                    <p class="text-2xl font-semibold text-gray-800">${stats.rejectedQuotes}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recent Moves -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">Recent Moves</h3>
                                <button id="newMoveBtn" class="flex items-center bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700">
                                    <i class="fas fa-plus mr-1"></i> New Move
                                </button>
                            </div>
                            <div class="space-y-4">
                                ${recentMoves.length > 0 ? 
                                    recentMoves.map(customer => `
                                        <div class="border border-gray-200 rounded-lg p-4 customer-card">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <div class="flex items-center">
                                                        <h3 class="font-medium text-gray-800">${customer.name}</h3>
                                                        <span class="ml-2 px-2 py-1 rounded-full text-xs font-medium ${customer.type === 'residential' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}">
                                                            ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                                        </span>
                                                    </div>
                                                    <p class="text-gray-500 text-sm mt-1 flex items-center">
                                                        <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                                                    </p>
                                                </div>
                                                <span class="text-xs text-gray-500">${formatDate(customer.moveDate)}</span>
                                            </div>
                                            <div class="mt-3">
                                                <div class="flex items-center">
                                                    <div class="flex-1 bg-gray-200 rounded-full h-2">
                                                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${getMoveProgress(customer) * 25}%"></div>
                                                    </div>
                                                    <span class="ml-3 text-sm text-gray-600">${getMoveProgress(customer) * 25}%</span>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('') : 
                                    `<div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-truck text-4xl mb-2 opacity-50"></i>
                                        <p>No recent moves found</p>
                                    </div>`
                                }
                            </div>
                        </div>

                        <!-- Pending Quotes -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">Pending Quotes</h3>
                                <button id="newQuoteBtn" class="flex items-center bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700">
                                    <i class="fas fa-plus mr-1"></i> New Quote
                                </button>
                            </div>
                            <div class="space-y-4">
                                ${pendingQuotes.length > 0 ? 
                                    pendingQuotes.map(quote => `
                                        <div class="border border-gray-200 rounded-lg p-4 quote-card">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <h3 class="font-medium text-gray-800">${quote.customerName}</h3>
                                                    <p class="text-gray-500 text-sm mt-1">${quote.moveSize}</p>
                                                </div>
                                                <span class="px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800">Pending</span>
                                            </div>
                                            <div class="mt-3 flex justify-between">
                                                <span class="text-sm text-gray-500">Valid until ${formatDate(quote.validity)}</span>
                                                <span class="font-medium text-gray-800">AED ${formatNumber(quote.estimatedCost)}</span>
                                            </div>
                                        </div>
                                    `).join('') : 
                                    `<div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-file-invoice text-4xl mb-2 opacity-50"></i>
                                        <p>No pending quotes found</p>
                                    </div>`
                                }
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = dashboardHTML;
            setupEventListeners();
        }

        // Helper function to calculate move progress
        function getMoveProgress(customer) {
            const steps = ['plan', 'pack', 'load', 'deliver'];
            let completedSteps = 0;
            
            steps.forEach(step => {
                if (customer.stepStatus[step] === 'completed') {
                    completedSteps++;
                }
            });
            
            return completedSteps;
        }

        // Render Customers
        function renderCustomers() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );
            
            const customersHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-800">Customer Management</h2>
                            <p class="text-gray-500 text-sm mt-1">Manage your customer database</p>
                        </div>
                        <div class="mt-4 md:mt-0">
                            <button id="newMoveBtn" class="flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                <i class="fas fa-user-plus mr-2"></i>New Customer
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Phone</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Address</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Move Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                ${filteredCustomers.map(customer => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="bg-gray-300 border-2 border-dashed rounded w-10 h-10"></div>
                                                <div class="ml-4">
                                                    <div class="font-medium text-gray-800">${customer.name}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${customer.type === 'residential' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}">
                                                ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${customer.phone}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${customer.address}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatDate(customer.moveDate)}</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 rounded-full text-xs font-medium ${getMoveStatusClass(customer)}">
                                                ${getMoveStatusText(customer)}
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button class="text-blue-600 hover:text-blue-900 mr-3 view-details" data-customer-id="${customer.id}">View</button>
                                            <button class="text-green-600 hover:text-green-900 mr-3">Edit</button>
                                            <button class="text-red-600 hover:text-red-900">Delete</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-6 flex flex-col sm:flex-row justify-between items-center">
                        <p class="text-sm text-gray-700">
                            Showing <span class="font-medium">${filteredCustomers.length}</span> of <span class="font-medium">${customers.length}</span> customers
                        </p>
                        <div class="mt-4 sm:mt-0">
                            <nav class="flex items-center space-x-1">
                                <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">Previous</a>
                                <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">1</a>
                                <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</a>
                                <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</a>
                                <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">Next</a>
                            </nav>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = customersHTML;
            setupEventListeners();
        }

        // Helper function to get move status class
        function getMoveStatusClass(customer) {
            const steps = ['plan', 'pack', 'load', 'deliver'];
            const completedSteps = steps.filter(step => customer.stepStatus[step] === 'completed').length;
            
            if (completedSteps === 4) return 'bg-green-100 text-green-800';
            if (completedSteps === 0) return 'bg-red-100 text-red-800';
            return 'bg-blue-100 text-blue-800';
        }

        // Helper function to get move status text
        function getMoveStatusText(customer) {
            const steps = ['plan', 'pack', 'load', 'deliver'];
            const completedSteps = steps.filter(step => customer.stepStatus[step] === 'completed').length;
            
            if (completedSteps === 4) return 'Completed';
            if (completedSteps === 0) return 'Not Started';
            return 'In Progress';
        }

        // Render Moves
        function renderMoves() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            // Filter customers
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchQuery) ||
                customer.phone.includes(searchQuery) ||
                customer.address.toLowerCase().includes(searchQuery)
            );
            
            const movesHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-6">Move Management</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Move List -->
                        <div class="lg:col-span-2">
                            <div class="mb-6 flex justify-between items-center">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-800">All Moves</h3>
                                    <p class="text-gray-500 text-sm mt-1">Track all active and scheduled moves</p>
                                </div>
                                <button id="newMoveBtn" class="flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>New Move
                                </button>
                            </div>
                            
                            <div class="space-y-4">
                                ${filteredCustomers.map(customer => `
                                    <div class="border border-gray-200 rounded-lg p-4 customer-card">
                                        <div class="flex justify-between items-start mb-3">
                                            <div>
                                                <div class="flex items-center">
                                                    <h3 class="font-medium text-gray-800">${customer.name}</h3>
                                                    <span class="ml-2 px-2 py-1 rounded-full text-xs font-medium ${customer.type === 'residential' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}">
                                                        ${customer.type.charAt(0).toUpperCase() + customer.type.slice(1)}
                                                    </span>
                                                </div>
                                                <p class="text-gray-500 text-sm mt-1 flex items-center">
                                                    <i class="fas fa-map-marker-alt mr-1"></i> ${customer.address}
                                                </p>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-sm font-medium text-gray-800">${formatDate(customer.moveDate)}</p>
                                                <span class="px-2 py-1 rounded-full text-xs font-medium ${getMoveStatusClass(customer)} mt-1 inline-block">
                                                    ${getMoveStatusText(customer)}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <!-- Progress Steps -->
                                        <div class="mb-4">
                                            <div class="flex justify-between mb-2">
                                                <span class="text-sm font-medium text-gray-700">Move Progress</span>
                                                <span class="text-sm text-gray-500">${getMoveProgress(customer) * 25}%</span>
                                            </div>
                                            <div class="flex justify-between relative">
                                                <!-- Progress line -->
                                                <div class="absolute top-4 left-0 w-full h-1 bg-gray-200"></div>
                                                <div class="absolute top-4 left-0 h-1 bg-blue-600" style="width: ${getMoveProgress(customer) * 25}%"></div>
                                                
                                                <!-- Plan Step -->
                                                <div class="relative z-10 text-center">
                                                    <div class="w-10 h-10 rounded-full ${customer.stepStatus.plan === 'completed' ? 'bg-green-500 text-white' : customer.stepStatus.plan === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'} flex items-center justify-center mb-2">
                                                        ${customer.stepStatus.plan === 'completed' ? '<i class="fas fa-check"></i>' : '1'}
                                                    </div>
                                                    <h3 class="font-medium text-xs">Plan</h3>
                                                </div>
                                                
                                                <!-- Pack Step -->
                                                <div class="relative z-10 text-center">
                                                    <div class="w-10 h-10 rounded-full ${customer.stepStatus.pack === 'completed' ? 'bg-green-500 text-white' : customer.stepStatus.pack === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'} flex items-center justify-center mb-2">
                                                        ${customer.stepStatus.pack === 'completed' ? '<i class="fas fa-check"></i>' : '2'}
                                                    </div>
                                                    <h3 class="font-medium text-xs">Pack</h3>
                                                </div>
                                                
                                                <!-- Load Step -->
                                                <div class="relative z-10 text-center">
                                                    <div class="w-10 h-10 rounded-full ${customer.stepStatus.load === 'completed' ? 'bg-green-500 text-white' : customer.stepStatus.load === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'} flex items-center justify-center mb-2">
                                                        ${customer.stepStatus.load === 'completed' ? '<i class="fas fa-check"></i>' : '3'}
                                                    </div>
                                                    <h3 class="font-medium text-xs">Load</h3>
                                                </div>
                                                
                                                <!-- Deliver Step -->
                                                <div class="relative z-10 text-center">
                                                    <div class="w-10 h-10 rounded-full ${customer.stepStatus.deliver === 'completed' ? 'bg-green-500 text-white' : customer.stepStatus.deliver === 'in-progress' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-500'} flex items-center justify-center mb-2">
                                                        ${customer.stepStatus.deliver === 'completed' ? '<i class="fas fa-check"></i>' : '4'}
                                                    </div>
                                                    <h3 class="font-medium text-xs">Deliver</h3>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-details" data-customer-id="${customer.id}">View Details</button>
                                            <button class="flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">Update Status</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- Move Details Sidebar -->
                        <div class="lg:col-span-1">
                            <div class="bg-gray-50 rounded-xl p-6">
                                <h3 class="text-md font-semibold text-gray-800 mb-4">Quick Stats</h3>
                                <div class="space-y-4">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Total Moves</span>
                                        <span class="font-medium">${customers.length}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Active Moves</span>
                                        <span class="font-medium">${customers.filter(c => getMoveProgress(c) < 4).length}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Completed</span>
                                        <span class="font-medium">${customers.filter(c => getMoveProgress(c) === 4).length}</span>
                                    </div>
                                    <div class="pt-4 border-t border-gray-200">
                                        <h4 class="font-medium text-gray-800 mb-2">Today's Moves</h4>
                                        <div class="text-sm text-gray-600">
                                            ${customers.filter(c => c.moveDate === new Date().toISOString().split('T')[0]).length} scheduled
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = movesHTML;
            setupEventListeners();
        }

        // Render Quotes
        function renderQuotes() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
            
            // Filter quotes
            const filteredQuotes = quotes.filter(quote => 
                quote.customerName.toLowerCase().includes(searchQuery) ||
                quote.moveSize.toLowerCase().includes(searchQuery) ||
                quote.estimatedCost.toString().includes(searchQuery)
            );
            
            const quotesHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-800">Quotes Management</h2>
                            <p class="text-gray-500 text-sm mt-1">Create and manage move estimates for potential customers</p>
                        </div>
                        <div class="mt-4 md:mt-0">
                            <button id="newQuoteBtn" class="flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                <i class="fas fa-file-invoice mr-2"></i>New Quote
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-6 flex space-x-4">
                        <button class="px-4 py-2 rounded-lg font-medium ${!searchQuery ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" onclick="filterQuotes('all')">
                            All Quotes
                        </button>
                        <button class="px-4 py-2 rounded-lg font-medium ${searchQuery === 'pending' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" onclick="filterQuotes('pending')">
                            Pending
                        </button>
                        <button class="px-4 py-2 rounded-lg font-medium ${searchQuery === 'accepted' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" onclick="filterQuotes('accepted')">
                            Accepted
                        </button>
                        <button class="px-4 py-2 rounded-lg font-medium ${searchQuery === 'rejected' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}" onclick="filterQuotes('rejected')">
                            Rejected
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${filteredQuotes.map(quote => `
                            <div class="border border-gray-200 rounded-xl p-5 quote-card">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="font-medium text-gray-800">${quote.customerName}</h3>
                                        <p class="text-sm text-gray-500">${quote.moveSize}</p>
                                    </div>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${quote.status === 'pending' ? 'bg-amber-100 text-amber-800' : quote.status === 'accepted' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${quote.status.charAt(0).toUpperCase() + quote.status.slice(1)}
                                    </span>
                                </div>
                                
                                <div class="space-y-3 mb-4">
                                    <div class="flex justify-between">
                                        <span class="text-gray-500 text-sm">Date Created</span>
                                        <span class="font-medium text-gray-800 text-sm">${formatDate(quote.date)}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-500 text-sm">Valid Until</span>
                                        <span class="font-medium text-gray-800 text-sm">${formatDate(quote.validity)}</span>
                                    </div>
                                    <div class="border-t border-gray-200 pt-3">
                                        <div class="flex justify-between font-bold">
                                            <span>Estimated Cost</span>
                                            <span>AED ${formatNumber(quote.estimatedCost)}</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h4 class="text-sm font-medium text-gray-700 mb-2">Services Included</h4>
                                    <div class="flex flex-wrap gap-2">
                                        ${quote.services.map(service => `
                                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">${service}</span>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-quote" data-quote-id="${quote.id}">
                                        View Details
                                    </button>
                                    ${quote.status === 'pending' ? `
                                        <button class="update-quote-status flex-1 px-3 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" data-quote-id="${quote.id}" data-status="accepted">
                                            Accept
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        `).join('')}
                        
                        ${filteredQuotes.length === 0 ? `
                            <div class="col-span-full text-center py-12 bg-gray-50 rounded-xl">
                                <i class="fas fa-file-invoice text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-800">No quotes found</h3>
                                <p class="text-gray-500 mt-2">You haven't created any quotes yet.</p>
                                <button id="newQuoteBtn" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    <i class="fas fa-plus mr-2"></i>Create Your First Quote
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = quotesHTML;
            setupEventListeners();
        }

        // Filter quotes function
        function filterQuotes(status) {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.value = status;
            }
            
            const event = new Event('input', { bubbles: true });
            searchInput.dispatchEvent(event);
        }

        // Update quote status
        function updateQuoteStatus(quoteId, status) {
            let quotes = JSON.parse(localStorage.getItem('packndash_quotes')) || [];
            const quoteIndex = quotes.findIndex(q => q.id == quoteId);
            
            if (quoteIndex !== -1) {
                quotes[quoteIndex].status = status;
                localStorage.setItem('packndash_quotes', JSON.stringify(quotes));
                
                // Update stats
                let stats = JSON.parse(localStorage.getItem('packndash_stats'));
                const oldStatus = quotes[quoteIndex].status;
                
                if (oldStatus === 'pending') stats.pendingQuotes -= 1;
                if (oldStatus === 'accepted') stats.acceptedQuotes -= 1;
                if (oldStatus === 'rejected') stats.rejectedQuotes -= 1;
                
                if (status === 'pending') stats.pendingQuotes += 1;
                if (status === 'accepted') stats.acceptedQuotes += 1;
                if (status === 'rejected') stats.rejectedQuotes += 1;
                
                localStorage.setItem('packndash_stats', JSON.stringify(stats));
                
                // Show success message
                alert(`Quote status updated to ${status} successfully!`);
                
                // Refresh quotes view
                if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'quotes') {
                    renderQuotes();
                }
            }
        }

        // Render Schedule
        function renderSchedule() {
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            // Generate calendar for current month
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            const calendarDays = [];
            const tempDate = new Date(startDate);
            
            for (let i = 0; i < 42; i++) {
                calendarDays.push(new Date(tempDate));
                tempDate.setDate(tempDate.getDate() + 1);
            }
            
            const customers = JSON.parse(localStorage.getItem('packndash_customers')) || [];
            
            const scheduleHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold text-gray-800">Calendar Schedule</h2>
                        <div class="flex items-center space-x-2">
                            <button class="calendar-prev p-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h3 class="font-medium">${firstDay.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</h3>
                            <button class="calendar-next p-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-1 mb-2">
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Sun</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Mon</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Tue</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Wed</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Thu</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Fri</div>
                        <div class="p-2 text-center text-sm font-medium text-gray-500">Sat</div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-1">
                        ${calendarDays.map(day => {
                            const isCurrentMonth = day.getMonth() === currentMonth;
                            const isToday = day.toDateString() === today.toDateString();
                            const hasMove = customers.some(c => c.moveDate === day.toISOString().split('T')[0]);
                            
                            return `
                                <div class="calendar-day p-2 min-h-24 border border-gray-100 ${isCurrentMonth ? 'text-gray-800' : 'text-gray-400'} ${isToday ? 'today' : ''} ${hasMove ? 'has-move' : ''}" data-date="${day.toISOString().split('T')[0]}">
                                    <div class="flex justify-center">
                                        <span class="text-sm">${day.getDate()}</span>
                                    </div>
                                    ${hasMove ? `
                                        <div class="mt-1 space-y-1">
                                            ${customers.filter(c => c.moveDate === day.toISOString().split('T')[0]).slice(0, 2).map(c => `
                                                <div class="text-xs truncate">${c.name}</div>
                                            `).join('')}
                                            ${customers.filter(c => c.moveDate === day.toISOString().split('T')[0]).length > 2 ? `
                                                <div class="text-xs text-gray-500">+${customers.filter(c => c.moveDate === day.toISOString().split('T')[0]).length - 2} more</div>
                                            ` : ''}
                                        </div>
                                    ` : ''}
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <div class="mt-6 bg-gray-50 rounded-lg p-4">
                        <h3 class="font-medium text-gray-800 mb-3">Legend</h3>
                        <div class="flex flex-wrap gap-4">
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-blue-100 rounded-full mr-2"></div>
                                <span class="text-sm text-gray-600">Scheduled Move</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
                                <span class="text-sm text-gray-600">Today</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = scheduleHTML;
            setupEventListeners();
        }

        // Render Reviews
        function renderReviews() {
            const searchQuery = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            const reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            
            // Filter reviews
            const filteredReviews = reviews.filter(review => 
                review.customerName.toLowerCase().includes(searchQuery) ||
                review.comment.toLowerCase().includes(searchQuery)
            );
            
            const reviewsHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-800">Customer Reviews</h2>
                            <p class="text-gray-500 text-sm mt-1">Manage customer feedback and reviews</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${filteredReviews.map(review => `
                            <div class="border border-gray-200 rounded-xl p-5 review-card">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h3 class="font-medium text-gray-800">${review.customerName}</h3>
                                        <div class="flex items-center mt-1">
                                            ${[...Array(5)].map((_, i) => `
                                                <i class="fas fa-star ${i < review.rating ? 'text-yellow-400' : 'text-gray-300'}"></i>
                                            `).join('')}
                                            <span class="ml-2 text-sm text-gray-500">${formatDate(review.date)}</span>
                                        </div>
                                    </div>
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${review.status === 'published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                                        ${review.status.charAt(0).toUpperCase() + review.status.slice(1)}
                                    </span>
                                </div>
                                
                                <p class="text-gray-700 mb-4">${review.comment}</p>
                                
                                <div class="flex space-x-2">
                                    <button class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 view-review" data-review-id="${review.id}">
                                        View Details
                                    </button>
                                    ${review.status === 'published' ? `
                                        <button class="update-review-status flex-1 px-3 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700" data-review-id="${review.id}" data-status="archived">
                                            Archive
                                        </button>
                                    ` : `
                                        <button class="update-review-status flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-review-id="${review.id}" data-status="published">
                                            Publish
                                        </button>
                                    `}
                                </div>
                            </div>
                        `).join('')}
                        
                        ${filteredReviews.length === 0 ? `
                            <div class="col-span-full text-center py-12 bg-gray-50 rounded-xl">
                                <i class="fas fa-comments text-4xl text-gray-300 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-800">No reviews found</h3>
                                <p class="text-gray-500 mt-2">You don't have any customer reviews to manage.</p>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = reviewsHTML;
            setupEventListeners();
        }

        // Update review status
        function updateReviewStatus(reviewId, status) {
            let reviews = JSON.parse(localStorage.getItem('packndash_reviews')) || [];
            const reviewIndex = reviews.findIndex(r => r.id == reviewId);
            
            if (reviewIndex !== -1) {
                reviews[reviewIndex].status = status;
                localStorage.setItem('packndash_reviews', JSON.stringify(reviews));
                
                // Show success message
                alert(`Review status updated to ${status} successfully!`);
                
                // Refresh reviews view
                if (document.querySelector('.tab-link.tab-active')?.getAttribute('data-tab') === 'reviews') {
                    renderReviews();
                }
            }
        }

        // Render Reports
        function renderReports() {
            const stats = JSON.parse(localStorage.getItem('packndash_stats')) || {
                totalCustomers: 0,
                activeMoves: 0,
                completedMoves: 0,
                pendingQuotes: 0,
                acceptedQuotes: 0,
                rejectedQuotes: 0
            };
            
            const reportsHTML = `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-6">Reports & Analytics</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Revenue Chart -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h3 class="text-md font-semibold text-gray-800 mb-4">Monthly Revenue</h3>
                            <div class="report-chart flex items-end justify-around h-40">
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 80px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">Jan</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 120px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">Feb</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 100px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">Mar</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 140px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">Apr</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 160px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">May</span>
                                </div>
                                <div class="flex flex-col items-center">
                                    <div class="bg-blue-500 w-12" style="height: 180px;"></div>
                                    <span class="text-xs text-gray-600 mt-2">Jun</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Move Status Chart -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h3 class="text-md font-semibold text-gray-800 mb-4">Move Status</h3>
                            <div class="flex items-center justify-center h-40">
                                <div class="relative w-32 h-32">
                                    <svg class="w-32 h-32 transform -rotate-90" viewBox="0 0 100 100">
                                        <circle cx="50" cy="50" r="40" stroke="#e2e8f0" stroke-width="20" fill="none"></circle>
                                        <circle cx="50" cy="50" r="40" stroke="#16a34a" stroke-width="20" fill="none" stroke-dasharray="${(stats.completedMoves / (stats.completedMoves + stats.activeMoves)) * 251} 251" stroke-linecap="round"></circle>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <div class="text-center">
                                            <div class="text-2xl font-bold">${stats.completedMoves + stats.activeMoves}</div>
                                            <div class="text-xs text-gray-600">Total Moves</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 grid grid-cols-2 gap-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">Completed: ${stats.completedMoves}</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">Active: ${stats.activeMoves}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="text-center p-4 bg-white border border-gray-200 rounded-lg">
                            <div class="text-2xl font-bold text-gray-800">${stats.totalCustomers}</div>
                            <div class="text-sm text-gray-600">Total Customers</div>
                        </div>
                        <div class="text-center p-4 bg-white border border-gray-200 rounded-lg">
                            <div class="text-2xl font-bold text-blue-600">${stats.activeMoves}</div>
                            <div class="text-sm text-gray-600">Active Moves</div>
                        </div>
                        <div class="text-center p-4 bg-white border border-gray-200 rounded-lg">
                            <div class="text-2xl font-bold text-green-600">${stats.acceptedQuotes}</div>
                            <div class="text-sm text-gray-600">Accepted Quotes</div>
                        </div>
                        <div class="text-center p-4 bg-white border border-gray-200 rounded-lg">
                            <div class="text-2xl font-bold text-amber-600">${stats.pendingQuotes}</div>
                            <div class="text-sm text-gray-600">Pending Quotes</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = reportsHTML;
            setupEventListeners();
        }

        // Render Settings
        function renderSettings() {
            const settings = JSON.parse(localStorage.getItem('packndash_settings')) || {
                companyName: 'PacknDash',
                companyAddress: 'Dubai, UAE',
                companyPhone: '+971 4 222 2222',
                companyEmail: 'info@packndash.ae',
                notificationSettings: {
                    email: true,
                    sms: true,
                    push: true
                },
                businessHours: {
                    monday: '8:00 AM - 6:00 PM',
                    tuesday: '8:00 AM - 6:00 PM',
                    wednesday: '8:00 AM - 6:00 PM',
                    thursday: '8:00 AM - 6:00 PM',
                    friday: '9:00 AM - 2:00 PM',
                    saturday: 'Closed',
                    sunday: 'Closed'
                },
                services: [
                    { name: 'Residential Moving', price: 100, active: true },
                    { name: 'Commercial Storage', price: 150, active: true },
                    { name: 'Vehicle Storage', price: 80, active: true },
                    { name: 'Document Storage', price: 60, active: true },
                    { name: 'Packing Services', price: 50, active: true },
                    { name: 'Furniture Assembly', price: 75, active: true }
                ]
            };
            
            const settingsHTML = `
                <div class="p-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h2 class="text-lg font-semibold text-gray-800 mb-6">CRM Settings</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-1">
                                <div class="space-y-2">
                                    <a href="#" class="block p-3 rounded-lg bg-gray-50 font-medium text-gray-800 settings-section active" data-section="company">
                                        Company Information
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="notifications">
                                        Notification Settings
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="business-hours">
                                        Business Hours
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="services">
                                        Services
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="team">
                                        Team Management
                                    </a>
                                    <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 font-medium text-gray-600 settings-section" data-section="integrations">
                                        Integrations
                                    </a>
                                </div>
                            </div>
                            
                            <div class="lg:col-span-2">
                                <!-- Company Information -->
                                <div id="company-settings" class="settings-content">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Company Information</h3>
                                        <p class="text-gray-600 mb-6">Update your company details that appear in quotes and communications.</p>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Company Name</label>
                                                <input type="text" id="companyName" value="${settings.companyName}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                                <input type="tel" id="companyPhone" value="${settings.companyPhone}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            <div class="md:col-span-2">
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                                                <input type="text" id="companyAddress" value="${settings.companyAddress}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                                <input type="email" id="companyEmail" value="${settings.companyEmail}" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="saveCompanySettings" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save Changes</button>
                                    </div>
                                </div>
                                
                                <!-- Notification Settings -->
                                <div id="notifications-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Notification Settings</h3>
                                        <p class="text-gray-600 mb-6">Choose how you want to be notified about important events and updates.</p>
                                        <div class="space-y-4">
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="emailNotifications" name="emailNotifications" type="checkbox" ${settings.notificationSettings.email ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="emailNotifications" class="font-medium text-gray-700">Email Notifications</label>
                                                    <p class="text-gray-500 text-sm mt-1">Receive email notifications for new move requests and quote updates.</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="smsNotifications" name="smsNotifications" type="checkbox" ${settings.notificationSettings.sms ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="smsNotifications" class="font-medium text-gray-700">SMS Notifications</label>
                                                    <p class="text-gray-500 text-sm mt-1">Receive text message notifications for urgent move requests and schedule changes.</p>
                                                </div>
                                            </div>
                                            <div class="flex items-start p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center h-5">
                                                    <input id="pushNotifications" name="pushNotifications" type="checkbox" ${settings.notificationSettings.push ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                </div>
                                                <div class="ml-3">
                                                    <label for="pushNotifications" class="font-medium text-gray-700">Push Notifications</label>
                                                    <p class="text-gray-500 text-sm mt-1">Receive browser notifications when you're logged into the CRM.</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg mt-4">
                                            <h4 class="font-medium text-blue-800 mb-2">Notification Timing</h4>
                                            <p class="text-blue-700 text-sm">All notifications will be sent during business hours (8 AM - 6 PM GST).</p>
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="saveNotificationSettings" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save Changes</button>
                                    </div>
                                </div>
                                
                                <!-- Business Hours -->
                                <div id="business-hours-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Business Hours</h3>
                                        <p class="text-gray-600 mb-6">Set your company's operating hours for each day of the week.</p>
                                        <div class="space-y-4">
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="mondayOpen" type="checkbox" ${settings.businessHours.monday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="mondayOpen" class="ml-2 block text-sm font-medium text-gray-700">Monday</label>
                                                </div>
                                                <div>
                                                    <select id="mondayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.monday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.monday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="8:00 AM" ${settings.businessHours.monday.startsWith('8:00 AM') ? 'selected' : ''}>8:00 AM</option>
                                                        <option value="9:00 AM" ${settings.businessHours.monday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.monday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="mondayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.monday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.monday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="6:00 PM" ${settings.businessHours.monday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.monday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                        <option value="8:00 PM" ${settings.businessHours.monday.endsWith('8:00 PM') ? 'selected' : ''}>8:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="tuesdayOpen" type="checkbox" ${settings.businessHours.tuesday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="tuesdayOpen" class="ml-2 block text-sm font-medium text-gray-700">Tuesday</label>
                                                </div>
                                                <div>
                                                    <select id="tuesdayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.tuesday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.tuesday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="8:00 AM" ${settings.businessHours.tuesday.startsWith('8:00 AM') ? 'selected' : ''}>8:00 AM</option>
                                                        <option value="9:00 AM" ${settings.businessHours.tuesday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.tuesday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="tuesdayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.tuesday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.tuesday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="6:00 PM" ${settings.businessHours.tuesday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.tuesday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                        <option value="8:00 PM" ${settings.businessHours.tuesday.endsWith('8:00 PM') ? 'selected' : ''}>8:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="wednesdayOpen" type="checkbox" ${settings.businessHours.wednesday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="wednesdayOpen" class="ml-2 block text-sm font-medium text-gray-700">Wednesday</label>
                                                </div>
                                                <div>
                                                    <select id="wednesdayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.wednesday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.wednesday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="8:00 AM" ${settings.businessHours.wednesday.startsWith('8:00 AM') ? 'selected' : ''}>8:00 AM</option>
                                                        <option value="9:00 AM" ${settings.businessHours.wednesday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.wednesday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="wednesdayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.wednesday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.wednesday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="6:00 PM" ${settings.businessHours.wednesday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.wednesday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                        <option value="8:00 PM" ${settings.businessHours.wednesday.endsWith('8:00 PM') ? 'selected' : ''}>8:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="thursdayOpen" type="checkbox" ${settings.businessHours.thursday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="thursdayOpen" class="ml-2 block text-sm font-medium text-gray-700">Thursday</label>
                                                </div>
                                                <div>
                                                    <select id="thursdayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.thursday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.thursday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="8:00 AM" ${settings.businessHours.thursday.startsWith('8:00 AM') ? 'selected' : ''}>8:00 AM</option>
                                                        <option value="9:00 AM" ${settings.businessHours.thursday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.thursday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="thursdayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.thursday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.thursday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="6:00 PM" ${settings.businessHours.thursday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.thursday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                        <option value="8:00 PM" ${settings.businessHours.thursday.endsWith('8:00 PM') ? 'selected' : ''}>8:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="fridayOpen" type="checkbox" ${settings.businessHours.friday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="fridayOpen" class="ml-2 block text-sm font-medium text-gray-700">Friday</label>
                                                </div>
                                                <div>
                                                    <select id="fridayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.friday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.friday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="9:00 AM" ${settings.businessHours.friday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.friday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                        <option value="11:00 AM" ${settings.businessHours.friday.startsWith('11:00 AM') ? 'selected' : ''}>11:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="fridayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.friday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.friday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="2:00 PM" ${settings.businessHours.friday.endsWith('2:00 PM') ? 'selected' : ''}>2:00 PM</option>
                                                        <option value="3:00 PM" ${settings.businessHours.friday.endsWith('3:00 PM') ? 'selected' : ''}>3:00 PM</option>
                                                        <option value="4:00 PM" ${settings.businessHours.friday.endsWith('4:00 PM') ? 'selected' : ''}>4:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="saturdayOpen" type="checkbox" ${settings.businessHours.saturday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="saturdayOpen" class="ml-2 block text-sm font-medium text-gray-700">Saturday</label>
                                                </div>
                                                <div>
                                                    <select id="saturdayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.saturday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.saturday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="9:00 AM" ${settings.businessHours.saturday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.saturday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                        <option value="11:00 AM" ${settings.businessHours.saturday.startsWith('11:00 AM') ? 'selected' : ''}>11:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="saturdayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.saturday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.saturday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="5:00 PM" ${settings.businessHours.saturday.endsWith('5:00 PM') ? 'selected' : ''}>5:00 PM</option>
                                                        <option value="6:00 PM" ${settings.businessHours.saturday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.saturday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="grid grid-cols-3 gap-4 p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center">
                                                    <input id="sundayOpen" type="checkbox" ${settings.businessHours.sunday !== 'Closed' ? 'checked' : ''} class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="sundayOpen" class="ml-2 block text-sm font-medium text-gray-700">Sunday</label>
                                                </div>
                                                <div>
                                                    <select id="sundayStart" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.sunday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.sunday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="9:00 AM" ${settings.businessHours.sunday.startsWith('9:00 AM') ? 'selected' : ''}>9:00 AM</option>
                                                        <option value="10:00 AM" ${settings.businessHours.sunday.startsWith('10:00 AM') ? 'selected' : ''}>10:00 AM</option>
                                                        <option value="11:00 AM" ${settings.businessHours.sunday.startsWith('11:00 AM') ? 'selected' : ''}>11:00 AM</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <select id="sundayEnd" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${settings.businessHours.sunday === 'Closed' ? 'bg-gray-100' : ''}" ${settings.businessHours.sunday === 'Closed' ? 'disabled' : ''}>
                                                        <option value="5:00 PM" ${settings.businessHours.sunday.endsWith('5:00 PM') ? 'selected' : ''}>5:00 PM</option>
                                                        <option value="6:00 PM" ${settings.businessHours.sunday.endsWith('6:00 PM') ? 'selected' : ''}>6:00 PM</option>
                                                        <option value="7:00 PM" ${settings.businessHours.sunday.endsWith('7:00 PM') ? 'selected' : ''}>7:00 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="saveBusinessHours" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save Changes</button>
                                    </div>
                                </div>
                                
                                <!-- Services -->
                                <div id="services-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Services</h3>
                                        <p class="text-gray-600 mb-6">Manage the services you offer and their pricing.</p>
                                        <div class="space-y-4">
                                            ${settings.services.map(service => `
                                                <div class="flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg">
                                                    <div>
                                                        <h4 class="font-medium text-gray-800">${service.name}</h4>
                                                        <p class="text-sm text-gray-500">AED ${service.price} per hour</p>
                                                    </div>
                                                    <label class="relative inline-flex items-center cursor-pointer">
                                                        <input type="checkbox" value="" class="sr-only peer service-toggle" data-service="${service.name}" ${service.active ? 'checked' : ''}>
                                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                                    </label>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button id="saveServices" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save Changes</button>
                                    </div>
                                </div>
                                
                                <!-- Team Management -->
                                <div id="team-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Team Management</h3>
                                        <p class="text-gray-600 mb-6">Manage your team members and their access levels.</p>
                                        <div class="space-y-4">
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-medium">AJ</div>
                                                        <div class="ml-3">
                                                            <h4 class="font-medium text-gray-800">Ahmed Johnson</h4>
                                                            <p class="text-sm text-gray-500">Admin</p>
                                                        </div>
                                                    </div>
                                                    <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
                                                        <option>Admin</option>
                                                        <option>Manager</option>
                                                        <option>Staff</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-medium">SK</div>
                                                        <div class="ml-3">
                                                            <h4 class="font-medium text-gray-800">Sarah Khan</h4>
                                                            <p class="text-sm text-gray-500">Manager</p>
                                                        </div>
                                                    </div>
                                                    <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
                                                        <option>Admin</option>
                                                        <option selected>Manager</option>
                                                        <option>Staff</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg">
                                                <div class="flex items-center justify-between">
                                                    <div class="flex items-center">
                                                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-medium">MK</div>
                                                        <div class="ml-3">
                                                            <h4 class="font-medium text-gray-800">Mohammed Karim</h4>
                                                            <p class="text-sm text-gray-500">Staff</p>
                                                        </div>
                                                    </div>
                                                    <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
                                                        <option>Admin</option>
                                                        <option>Manager</option>
                                                        <option selected>Staff</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-4">
                                            <button class="w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">
                                                <i class="fas fa-plus mr-2"></i>Add Team Member
                                            </button>
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Save Changes</button>
                                    </div>
                                </div>
                                
                                <!-- Integrations -->
                                <div id="integrations-settings" class="settings-content hidden">
                                    <div class="bg-gray-50 rounded-lg p-5 mb-6">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Integrations</h3>
                                        <p class="text-gray-600 mb-6">Connect with other tools and services to enhance your CRM.</p>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-blue-100 text-blue-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fab fa-google text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800">Google Calendar</h4>
                                                <p class="text-sm text-gray-500 mt-1">Sync your moves with Google Calendar</p>
                                                <button class="mt-3 text-blue-600 text-sm font-medium">Connect</button>
                                            </div>
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-green-100 text-green-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fab fa-whatsapp text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800">WhatsApp</h4>
                                                <p class="text-sm text-gray-500 mt-1">Send notifications via WhatsApp</p>
                                                <button class="mt-3 text-blue-600 text-sm font-medium">Connect</button>
                                            </div>
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-purple-100 text-purple-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fas fa-envelope text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800">Email</h4>
                                                <p class="text-sm text-gray-500 mt-1">Connect your email account</p>
                                                <button class="mt-3 text-blue-600 text-sm font-medium">Connect</button>
                                            </div>
                                            <div class="p-4 bg-white border border-gray-200 rounded-lg text-center">
                                                <div class="bg-gray-100 text-gray-800 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-3">
                                                    <i class="fas fa-file-invoice text-xl"></i>
                                                </div>
                                                <h4 class="font-medium text-gray-800">Accounting</h4>
                                                <p class="text-sm text-gray-500 mt-1">Connect with your accounting software</p>
                                                <button class="mt-3 text-blue-600 text-sm font-medium">Connect</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('mainContent').innerHTML = settingsHTML;
            
            // Set up section navigation
            document.querySelectorAll('.settings-section').forEach(section => {
                section.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active section in sidebar
                    document.querySelectorAll('.settings-section').forEach(s => {
                        s.classList.remove('active', 'bg-gray-50', 'text-gray-800');
                        s.classList.add('hover:bg-gray-50', 'text-gray-600');
                    });
                    
                    this.classList.add('active', 'bg-gray-50', 'text-gray-800');
                    this.classList.remove('hover:bg-gray-50', 'text-gray-600');
                    
                    // Show the corresponding content
                    const sectionId = this.getAttribute('data-section');
                    document.querySelectorAll('.settings-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`${sectionId}-settings`).classList.remove('hidden');
                });
            });
            
            setupEventListeners();
        }

        // Save settings
        function saveSettings(settingType) {
            const settings = JSON.parse(localStorage.getItem('packndash_settings')) || {
                companyName: 'PacknDash',
                companyAddress: 'Dubai, UAE',
                companyPhone: '+971 4 222 2222',
                companyEmail: 'info@packndash.ae',
                notificationSettings: {
                    email: true,
                    sms: true,
                    push: true
                },
                businessHours: {
                    monday: '8:00 AM - 6:00 PM',
                    tuesday: '8:00 AM - 6:00 PM',
                    wednesday: '8:00 AM - 6:00 PM',
                    thursday: '8:00 AM - 6:00 PM',
                    friday: '9:00 AM - 2:00 PM',
                    saturday: 'Closed',
                    sunday: 'Closed'
                },
                services: [
                    { name: 'Residential Moving', price: 100, active: true },
                    { name: 'Commercial Storage', price: 150, active: true },
                    { name: 'Vehicle Storage', price: 80, active: true },
                    { name: 'Document Storage', price: 60, active: true },
                    { name: 'Packing Services', price: 50, active: true },
                    { name: 'Furniture Assembly', price: 75, active: true }
                ]
            };

            if (settingType === 'saveCompanySettings') {
                settings.companyName = document.getElementById('companyName').value;
                settings.companyAddress = document.getElementById('companyAddress').value;
                settings.companyPhone = document.getElementById('companyPhone').value;
                settings.companyEmail = document.getElementById('companyEmail').value;
                alert('Company information updated successfully!');
            } else if (settingType === 'saveNotificationSettings') {
                settings.notificationSettings.email = document.getElementById('emailNotifications').checked;
                settings.notificationSettings.sms = document.getElementById('smsNotifications').checked;
                settings.notificationSettings.push = document.getElementById('pushNotifications').checked;
                alert('Notification settings updated successfully!');
            } else if (settingType === 'saveBusinessHours') {
                settings.businessHours.monday = document.getElementById('mondayOpen').checked ? 
                    `${document.getElementById('mondayStart').value} - ${document.getElementById('mondayEnd').value}` : 'Closed';
                settings.businessHours.tuesday = document.getElementById('tuesdayOpen').checked ? 
                    `${document.getElementById('tuesdayStart').value} - ${document.getElementById('tuesdayEnd').value}` : 'Closed';
                settings.businessHours.wednesday = document.getElementById('wednesdayOpen').checked ? 
                    `${document.getElementById('wednesdayStart').value} - ${document.getElementById('wednesdayEnd').value}` : 'Closed';
                settings.businessHours.thursday = document.getElementById('thursdayOpen').checked ? 
                    `${document.getElementById('thursdayStart').value} - ${document.getElementById('thursdayEnd').value}` : 'Closed';
                settings.businessHours.friday = document.getElementById('fridayOpen').checked ? 
                    `${document.getElementById('fridayStart').value} - ${document.getElementById('fridayEnd').value}` : 'Closed';
                settings.businessHours.saturday = document.getElementById('saturdayOpen').checked ? 
                    `${document.getElementById('saturdayStart').value} - ${document.getElementById('saturdayEnd').value}` : 'Closed';
                settings.businessHours.sunday = document.getElementById('sundayOpen').checked ? 
                    `${document.getElementById('sundayStart').value} - ${document.getElementById('sundayEnd').value}` : 'Closed';
                alert('Business hours updated successfully!');
            } else if (settingType === 'saveServices') {
                settings.services.forEach(service => {
                    const checkbox = document.querySelector(`.service-toggle[data-service="${service.name}"]`);
                    if (checkbox) {
                        service.active = checkbox.checked;
                    }
                });
                alert('Services updated successfully!');
            }

            localStorage.setItem('packndash_settings', JSON.stringify(settings));
        }
    </script>
</body>
</html>
